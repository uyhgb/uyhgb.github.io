

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/browser_icon/fluid.jpg">
  <link rel="icon" href="/img/browser_icon/fluid.jpg">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="uyhgb">
  <meta name="keywords" content="">
  
    <meta name="description" content="煮波坠机了，得去准备期末了(还没写完)递归 代码12345678910111213141516例：求n!#include &lt;stdio.h&gt;int fact(int n);main( )&#123;printf(“3!&#x3D;%d, 5!&#x3D;%d\n”, fact(3), fact(5));&#125;int fact(int n)&#123;if( n &lt;&#x3D; 1)return ( 1)">
<meta property="og:type" content="article">
<meta property="og:title" content="[DS]P1数据结构基础">
<meta property="og:url" content="http://uyhgb.github.io/2025/06/13/DS-P1%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%9F%BA%E7%A1%80/index.html">
<meta property="og:site_name" content="uyhgb&#39;s Toy Box">
<meta property="og:description" content="煮波坠机了，得去准备期末了(还没写完)递归 代码12345678910111213141516例：求n!#include &lt;stdio.h&gt;int fact(int n);main( )&#123;printf(“3!&#x3D;%d, 5!&#x3D;%d\n”, fact(3), fact(5));&#125;int fact(int n)&#123;if( n &lt;&#x3D; 1)return ( 1)">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://uyhgb.github.io/img/post_idx/postDS.jpg">
<meta property="article:published_time" content="2025-06-12T16:51:05.000Z">
<meta property="article:modified_time" content="2025-06-12T16:52:01.164Z">
<meta property="article:author" content="uyhgb">
<meta property="article:tag" content="DS">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://uyhgb.github.io/img/post_idx/postDS.jpg">
  
  
  
  <title>[DS]P1数据结构基础 - uyhgb&#39;s Toy Box</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"uyhgb.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":"Lmk9Sm7LRoOjJnZaSN5jc0G5-MdYXbMMI","app_key":"YzimN5n7KmEyMTQYPPFlLYvj","server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2025-05-07T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  
    
  



  
<!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css" integrity="sha512-fHwaWebuwA7NSF5Qg/af4UeDx9XqUpYpOGgubo3yWu+b2IQR4UeQwbb42Ti7gVAjNtVoI/I9TEoYeu9omwcC6g==" crossorigin="anonymous" referrerpolicy="no-referrer" /><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>uyhgb&#39;s Toy Box</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/post_banner/postDS.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="[DS]P1数据结构基础"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-06-13 00:51" pubdate>
          2025年6月13日 凌晨
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          13k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          110 分钟
        
      </span>
    

    
    
      
        <span id="leancloud-page-views-container" class="post-meta" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="leancloud-page-views"></span>次
        </span>
        
      
      
    
  </div>


        
      </div>

      
        <div class="scroll-down-bar">
          <i class="iconfont icon-arrowdown"></i>
        </div>
      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">[DS]P1数据结构基础</h1>
            
            
              <div class="markdown-body">
                
                <h2 id="煮波坠机了，得去准备期末了-还没写完"><a href="#煮波坠机了，得去准备期末了-还没写完" class="headerlink" title="煮波坠机了，得去准备期末了(还没写完)"></a>煮波坠机了，得去准备期末了(还没写完)</h2><h1 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h1><p><img src="/img/post_illust_img/postDS/post1/image-1.jpg" srcset="/img/loading.gif" lazyload alt="公式"><br><img src="/img/post_illust_img/postDS/post1/image-2.jpg" srcset="/img/loading.gif" lazyload alt="公式"></p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c">例：求n!<br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-type">int</span> <span class="hljs-title function_">fact</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span>;<br>main( )<br>&#123;<br><span class="hljs-built_in">printf</span>(“<span class="hljs-number">3</span>!=%d, <span class="hljs-number">5</span>!=%d\n”, fact(<span class="hljs-number">3</span>), fact(<span class="hljs-number">5</span>));<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">fact</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span><br>&#123;<br><span class="hljs-keyword">if</span>( n &lt;= <span class="hljs-number">1</span>)<br><span class="hljs-keyword">return</span> ( <span class="hljs-number">1</span>);<br><span class="hljs-keyword">else</span> <br><span class="hljs-keyword">return</span> ( n * fact(n<span class="hljs-number">-1</span>));<br>&#125;<br><br><br></code></pre></td></tr></table></figure>


<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">fact</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span><br>&#123;<br><span class="hljs-type">int</span> f ;<br><span class="hljs-keyword">for</span>(f=<span class="hljs-number">1</span>; n&gt;<span class="hljs-number">0</span>;  n--)<br>f *= n;<br>	    <span class="hljs-keyword">return</span> ( f);<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h1 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h1><h2 id="在C里面的数组初始化方法"><a href="#在C里面的数组初始化方法" class="headerlink" title="在C里面的数组初始化方法"></a>在C里面的数组初始化方法</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">double</span> sales[<span class="hljs-number">5</span>] = &#123;<span class="hljs-number">12.25</span>, <span class="hljs-number">32.50</span>, <span class="hljs-number">16.90</span>, <span class="hljs-number">23</span>, <span class="hljs-number">45.68</span>&#125;;<br><span class="hljs-type">double</span> sales[ ] = &#123;<span class="hljs-number">12.25</span>, <span class="hljs-number">32.50</span>, <span class="hljs-number">16.90</span>, <span class="hljs-number">23</span>, <span class="hljs-number">45.68</span>&#125;;<br><span class="hljs-type">int</span> <span class="hljs-built_in">list</span>[<span class="hljs-number">5</span>] = &#123; <span class="hljs-number">6</span>, <span class="hljs-number">5</span>, <span class="hljs-number">12</span> &#125;; <span class="hljs-comment">//相当于：  int list[5] = &#123;6,5,12,0,0&#125;;</span><br><span class="hljs-type">int</span> <span class="hljs-built_in">list</span>[<span class="hljs-number">5</span>] = &#123;<span class="hljs-number">0</span>&#125;;   <span class="hljs-comment">//最常用的初始化数据组元素为0的方式 </span><br><span class="hljs-type">char</span> <span class="hljs-built_in">string</span>[<span class="hljs-number">10</span>] = “hello”;<br><span class="hljs-type">char</span> <span class="hljs-built_in">string</span>[<span class="hljs-number">10</span>] = &#123;‘h’, ‘e’, ‘l’, ‘l’, ‘o’, ‘\<span class="hljs-number">0</span>’&#125;;<br><span class="hljs-type">char</span> <span class="hljs-built_in">string</span>[ ] = “hello”;<br><br></code></pre></td></tr></table></figure>

<p>C的数组是一个更加高级的数据类型，数组的元素是同类型变量，在内存地址上是连续的。数组的元素可以通过下标访问，数组的下标从0开始，0为首元素，同时，数组名相当于一个指针，指向的是数组的首元素。</p>
<h2 id="数组作为函数参数"><a href="#数组作为函数参数" class="headerlink" title="数组作为函数参数"></a>数组作为函数参数</h2><p>传递数组作为函数参数时，实际上是传递数组的首地址。函数内部可以通过指针操作数组元素。<br>并且形参数组和实参数组是一对共享同一数据区的数组，他们就是同一个数组，而不是拷贝，因此在函数中对数组进行修改会影响到原数组。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/*非字符数组作为参数时，函数的定义形式</span><br><span class="hljs-comment">  数组长度可省略:int array[]和int array[10]都是合法的，但传入10毫无意义，因为传入的是首地址，所以对于非字符数组还要传入int size参数来表示数组的长度。</span><br><span class="hljs-comment">*/</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">fun</span><span class="hljs-params">( <span class="hljs-type">int</span> <span class="hljs-built_in">array</span>[ ], <span class="hljs-type">int</span> size)</span><br>&#123;…&#125;<br><br><br><span class="hljs-comment">//数组作为参数时，函数的调用形式：</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">int</span> a[<span class="hljs-number">10</span>];<br>    …<br>    <span class="hljs-comment">//a已经退化为指针，函数传入实参时传入的是首地址，不用加上&amp;符号</span><br>    fun(a, <span class="hljs-number">10</span>);<br>    …<br>&#125;<br></code></pre></td></tr></table></figure>

<h1 id="字符数组"><a href="#字符数组" class="headerlink" title="字符数组"></a>字符数组</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> mes[ ] = “C Language”;<br><span class="hljs-type">char</span> line[<span class="hljs-number">100</span>] = “Programming”;<br></code></pre></td></tr></table></figure>

<ul>
<li>数组元素跟一般变量一样可赋值、比较、计算等。</li>
<li>数组下标也是从0 ~ N-1（N为数组长度）。</li>
<li>字符数组长度可以显式给出，也可以隐式得到。</li>
<li>由双引号括起来的的字符串常量具有静态字符串数组类型。</li>
<li>用字符串常量对数组初始化时，编译程序以\0作为结束这个数组。因此,用字符数组来存放字符串时，数组长度要比字符串长度多1。</li>
</ul>
<h2 id="问题1-数字字符串转换成整数"><a href="#问题1-数字字符串转换成整数" class="headerlink" title="问题1 数字字符串转换成整数"></a>问题1 数字字符串转换成整数</h2><p><strong>代码实现</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//str2int.c</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">str2int</span><span class="hljs-params">(<span class="hljs-type">char</span> s[])</span>;  <span class="hljs-comment">//提前声明函数，再写main函数</span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">char</span> s[<span class="hljs-number">20</span>];<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>,&amp;s);<br>    <span class="hljs-type">int</span> result = str2int(s);<br>    <span class="hljs-type">int</span> test = result + <span class="hljs-number">10</span>;     <span class="hljs-comment">//一个简单测试</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,test);<br>    system(<span class="hljs-string">&quot;pause&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">str2int</span><span class="hljs-params">(<span class="hljs-type">char</span> s[])</span><br>&#123;<br>    <span class="hljs-type">int</span> i,sign,n;<br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;s[i]==<span class="hljs-string">&#x27; &#x27;</span>||s[i]==<span class="hljs-string">&#x27;\n&#x27;</span>||s[i]==<span class="hljs-string">&#x27;\t&#x27;</span>;i++)      <span class="hljs-comment">//循环跳过所有空格换行制表，执行空语句;</span><br>    ;<br>    sign = <span class="hljs-number">1</span>;       <span class="hljs-comment">//符号确定</span><br>    <span class="hljs-keyword">if</span>(s[i]==<span class="hljs-string">&#x27;+&#x27;</span>||s[i]==<span class="hljs-string">&#x27;-&#x27;</span>)<br>        sign = (s[i++]==<span class="hljs-string">&#x27;+&#x27;</span>)?<span class="hljs-number">1</span>:<span class="hljs-number">-1</span>;      <span class="hljs-comment">//三元运算符，a = (条件判断)?a1:a2;     条件为真赋值a1,反之a2   结束后i++到下一个数字</span><br>    <br>    <span class="hljs-keyword">for</span> (n=<span class="hljs-number">0</span>;s[i]&gt;=<span class="hljs-string">&#x27;0&#x27;</span>&amp;&amp; s[i]&lt;=<span class="hljs-string">&#x27;9&#x27;</span>;i++) <span class="hljs-comment">//保证指针指向数字字符，背后是ASCII码</span><br>        n = n*<span class="hljs-number">10</span> +s[i] -<span class="hljs-string">&#x27;0&#x27;</span>;    <span class="hljs-comment">//核心，递归，在note有图说明，另外重点在于-&#x27;0&#x27;，实质是ASCII码相减</span><br>    <span class="hljs-keyword">return</span> (sign*n);    <span class="hljs-comment">//定义符号</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>核心代码</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">for</span> (n=<span class="hljs-number">0</span>;s[i]&gt;=<span class="hljs-string">&#x27;0&#x27;</span>&amp;&amp; s[i]&lt;=<span class="hljs-string">&#x27;9&#x27;</span>;i++) <span class="hljs-comment">//保证指针指向数字字符，背后是ASCII码</span><br>    n = n*<span class="hljs-number">10</span> +s[i] -<span class="hljs-string">&#x27;0&#x27;</span>;    <span class="hljs-comment">//核心，递归，在note有图说明，另外重点在于-&#x27;0&#x27;，实质是ASCII码相减</span><br><br></code></pre></td></tr></table></figure>
<p>图示<br><img src="/img/post_illust_img/postDS/post1/image-3.jpg" srcset="/img/loading.gif" lazyload alt="图示"></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c">n = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; s[i]为数字字符; i++)<br>        n = <span class="hljs-number">10</span>*n + s[i] – ‘<span class="hljs-number">0</span>’;<br><br></code></pre></td></tr></table></figure>

<h2 id="问题2-将字符串颠倒"><a href="#问题2-将字符串颠倒" class="headerlink" title="问题2 将字符串颠倒"></a>问题2 将字符串颠倒</h2><p><strong>for循环和while循环</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//for循环更紧凑，初始化，变量更新全部写在for循环头部，适合已知循环次数的情况</span><br><span class="hljs-keyword">for</span> (initialization; condition; increment/decrement)<br>&#123;<br>    <span class="hljs-comment">// loop body</span><br>&#125;<br><br><span class="hljs-comment">//while循环更灵活，初始化在循环外，变量更新在循环内，适合未知循环次数的情况</span><br>initialization;<br><span class="hljs-keyword">while</span> (condition)<br>&#123;<br>    <span class="hljs-comment">// loop body</span><br>    increment/decrement;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>代码实现</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//reverse.c</span><br><span class="hljs-meta"># <span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta"># <span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">strlen</span><span class="hljs-params">(<span class="hljs-type">char</span> s[])</span>;<br><span class="hljs-type">void</span> <span class="hljs-title function_">reverse</span><span class="hljs-params">(<span class="hljs-type">char</span> s[],<span class="hljs-type">int</span> j)</span>;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">char</span> s[<span class="hljs-number">20</span>];<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>,&amp;s);<br>    <span class="hljs-type">int</span> j = <span class="hljs-built_in">strlen</span>(s);<br>    reverse(s,j);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n%s\n&quot;</span>,s);<br>    system(<span class="hljs-string">&quot;pause&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">strlen</span><span class="hljs-params">(<span class="hljs-type">char</span> s[])</span><br>&#123;<br>    <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (s[i]!=<span class="hljs-string">&#x27;\0&#x27;</span>)<br>    i++;<br>    <span class="hljs-keyword">return</span> i<span class="hljs-number">-1</span>;     <span class="hljs-comment">//注意减1，才是\0之前的字符</span><br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">reverse</span><span class="hljs-params">(<span class="hljs-type">char</span> s[],<span class="hljs-type">int</span> j)</span><br>&#123;<br>    <span class="hljs-type">int</span> k;<br>    <span class="hljs-type">char</span> c;<br>    <span class="hljs-keyword">for</span>(k=<span class="hljs-number">0</span>;k&lt;j;k++,j--)<br>    &#123;<br>        c=s[k];<br>        s[k]=s[j];<br>        s[j]=c;<br>    &#125;<br>&#125;<br><br><br><br></code></pre></td></tr></table></figure>
<p><strong>核心代码</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//查询字符串长度</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">strlen</span><span class="hljs-params">(<span class="hljs-type">char</span> s[])</span><br>&#123;<br>    <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (s[i]!=<span class="hljs-string">&#x27;\0&#x27;</span>)<br>    i++;<br>    <span class="hljs-keyword">return</span> i<span class="hljs-number">-1</span>;      <span class="hljs-comment">//注意减1，才是\0之前的字符</span><br>&#125;<br><br><span class="hljs-comment">//颠倒字符串</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">reverse</span><span class="hljs-params">(<span class="hljs-type">char</span> s[],<span class="hljs-type">int</span> j)</span><br>&#123;<br>    <span class="hljs-type">int</span> k;<br>    <span class="hljs-type">char</span> c;<br>    <span class="hljs-keyword">for</span>(k=<span class="hljs-number">0</span>;k&lt;j;k++,j--)    <span class="hljs-comment">//一边加一遍减，两边对换，往内移动，01234--&gt;41230--&gt;43210,</span><br>    &#123;<br>        c=s[k];<br>        s[k]=s[j];<br>        s[j]=c;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>另外注意，字符串的结束符是’\0’，因此在计算字符串长度时要减1。</p>
<h2 id="问题3-整数转换成字符串"><a href="#问题3-整数转换成字符串" class="headerlink" title="问题3 整数转换成字符串"></a>问题3 整数转换成字符串</h2><p><strong>代码实现</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//int2str.c</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">deprecated，感觉自己写不出来</span><br><span class="hljs-comment">缺少判断条件</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"></span><br><span class="hljs-comment"></span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># include &lt;stdio.h&gt;</span><br><span class="hljs-comment"># include &lt;stdlib.h&gt;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">int convert(int a);</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">int main()</span><br><span class="hljs-comment">&#123;</span><br><span class="hljs-comment">    int a;</span><br><span class="hljs-comment">    scanf(&quot;%d&quot;,&amp;a);</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    </span><br><span class="hljs-comment">    char s[20] = convert(a);</span><br><span class="hljs-comment">    printf(&quot;%s&quot;,s);</span><br><span class="hljs-comment">    system(&quot;pause&quot;);</span><br><span class="hljs-comment">    return 0;</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">int convert(int a)</span><br><span class="hljs-comment">&#123;</span><br><span class="hljs-comment">    int i=0;</span><br><span class="hljs-comment">    char j[20];</span><br><span class="hljs-comment">    while (j[i]);</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-comment">//示例复刻</span><br><span class="hljs-comment">//示例需要从低位开始提取，最后加上\0再反转字符串</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-type">void</span> <span class="hljs-title function_">i2s</span><span class="hljs-params">(<span class="hljs-type">char</span> s[],<span class="hljs-type">int</span> n)</span>;<br><span class="hljs-type">void</span> <span class="hljs-title function_">reverse</span><span class="hljs-params">(<span class="hljs-type">char</span> s[])</span>;<br><span class="hljs-type">int</span> <span class="hljs-title function_">strlen</span><span class="hljs-params">(<span class="hljs-type">char</span> s[])</span>;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">char</span> s[<span class="hljs-number">20</span>];<br>    <span class="hljs-type">int</span> n;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;n);<br>    i2s(s,n);<br>    reverse(s);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s&quot;</span>,s);<br>    system(<span class="hljs-string">&quot;pause&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">i2s</span><span class="hljs-params">(<span class="hljs-type">char</span> s[],<span class="hljs-type">int</span> n)</span><br>&#123;<br>    <span class="hljs-type">int</span> i,sign;<br>    i=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span>((sign=n)&lt;<span class="hljs-number">0</span>)      <span class="hljs-comment">//一举两得，还能保护sign</span><br>    &#123;<br>        n=-n;           <span class="hljs-comment">//负变正</span><br>    &#125;<br><br>    <span class="hljs-keyword">do</span>&#123;<br>        s[i++] = n%<span class="hljs-number">10</span> +<span class="hljs-string">&#x27;0&#x27;</span>;<br>    &#125; <span class="hljs-comment">//while (n/=10 &gt; 0);死循环--&gt;(n/=(10&gt;0))--&gt;(n/=1)    //do while先执行再判断，&gt;先执行再/=</span><br>        <span class="hljs-keyword">while</span> ((n/=<span class="hljs-number">10</span>)&gt;<span class="hljs-number">0</span>);<br><br>    <span class="hljs-keyword">if</span> (sign&lt;<span class="hljs-number">0</span>)<br>    s[i++]=<span class="hljs-string">&#x27;-&#x27;</span>;<br>    s[i]=<span class="hljs-string">&#x27;\0&#x27;</span>;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">reverse</span><span class="hljs-params">(<span class="hljs-type">char</span> s[])</span><br>&#123;<br>    <span class="hljs-type">int</span> c,i,j;<br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>,j=<span class="hljs-built_in">strlen</span>(s);i&lt;j;i++,j--)<br>    &#123;<br>        c = s[i];<br>        s[i]=s[j];<br>        s[j]=c;<br>    &#125;<br>    <br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">strlen</span><span class="hljs-params">(<span class="hljs-type">char</span> s[])</span><br>&#123;<br>    <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>(s[i]!=<span class="hljs-string">&#x27;\0&#x27;</span>)<br>    i++;<br>    <span class="hljs-keyword">return</span> i<span class="hljs-number">-1</span>;<br>    <br>&#125;<br><br><br><span class="hljs-comment">//321-\0 --&gt;-123</span><br><span class="hljs-comment">//2134-\0 --&gt;-1342--&gt;-4312</span><br><span class="hljs-comment">//负数也绝对适用</span><br><span class="hljs-comment">//核心就是三行互换</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">int c,i,j;</span><br><span class="hljs-comment">for(i=0,j=strlen(s);i&lt;j;i++,j--)</span><br><span class="hljs-comment">&#123;</span><br><span class="hljs-comment">c = s[i];</span><br><span class="hljs-comment">s[i]=s[j];</span><br><span class="hljs-comment">s[j]=c;</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure>

<p>从低位到高位转换整数到字符串，注意要先将整数转换成正数，然后再将每一位数字转换成字符，然后存入数组，再加符号，加\0，再通过reverse函数颠倒字符串</p>
<h2 id="常用标准字符串库函数"><a href="#常用标准字符串库函数" class="headerlink" title="常用标准字符串库函数"></a>常用标准字符串库函数</h2><p>前面费心写了不少字符串处理函数，其实这些库已经存放在一些库里面了，C语言提供了很多标准字符串库函数，可以直接使用。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span> - 字符串处理函数</span><br>  <span class="hljs-type">int</span> <span class="hljs-title function_">strlen</span><span class="hljs-params">(<span class="hljs-type">char</span> s[])</span>;   	    <span class="hljs-comment">/*计算字符串长度, 字符串以\0结果*/</span><br>  <span class="hljs-type">char</span> *<span class="hljs-title function_">strcpy</span><span class="hljs-params">(<span class="hljs-type">char</span> s[], <span class="hljs-type">char</span> t[])</span>; <span class="hljs-comment">/*将字符串t拷贝到字符串s中*/</span><br>  <span class="hljs-type">char</span> *<span class="hljs-title function_">strcat</span><span class="hljs-params">(<span class="hljs-type">char</span> s[], <span class="hljs-type">char</span> t[])</span>; <span class="hljs-comment">/*将字符串t拷贝到字符串s尾部*/</span> <br>  <span class="hljs-type">int</span> <span class="hljs-title function_">strcmp</span><span class="hljs-params">(<span class="hljs-type">char</span> s[], <span class="hljs-type">char</span> t[])</span>;   <span class="hljs-comment">/*比较两个字符串,找第一个不相等的字符，若s&gt;t,则返回大于0的数;若s&lt;t,则返回小于0的数;若相等, 返回0 */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span> - 实用函数</span><br>  <span class="hljs-type">int</span>   <span class="hljs-title function_">atoi</span><span class="hljs-params">(<span class="hljs-type">char</span>  s[ ])</span>; 	<span class="hljs-comment">/* 将字符串转换成相应整数 */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span> - 输入/输出函数</span><br>  getchar()/<span class="hljs-built_in">putchar</span>(c) 		<span class="hljs-comment">/*按字符输入输出 */</span><br>  <span class="hljs-built_in">scanf</span>(“%s…)		<span class="hljs-comment">/*输入由非空字符组成的串*/</span><br>  <span class="hljs-built_in">printf</span>(“%s…)		<span class="hljs-comment">/*输出由‘\0’结束的串*/</span><br>  gets(<span class="hljs-type">char</span> s[])		<span class="hljs-comment">/*输入由回车结束的串，回车本身不读入,不建议使用*/</span><br>  <span class="hljs-built_in">puts</span>(<span class="hljs-type">char</span> s[])		<span class="hljs-comment">/*输出由‘\0’结束的串，自动加回车*/</span><br><br><br></code></pre></td></tr></table></figure>


<h2 id="操作文件"><a href="#操作文件" class="headerlink" title="操作文件"></a>操作文件</h2><p>使用stdio.h头文件<br>FILE *fp; &#x2F;&#x2F;文件指针<br>NULL &#x2F;&#x2F;空指针<br>EOF &#x2F;&#x2F;文件结束符，表示结束或错误</p>
<h3 id="常用的"><a href="#常用的" class="headerlink" title="常用的"></a>常用的</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>&#123;<br>FILE *in,*out;  <span class="hljs-comment">//定义文件指针，也有FILE，但基本不用</span><br>in = fopen(<span class="hljs-string">&quot;input.txt&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>); <span class="hljs-comment">//打开文件input.txt，读模式</span><br>out = fopen(<span class="hljs-string">&quot;output.txt&quot;</span>, <span class="hljs-string">&quot;w&quot;</span>); <span class="hljs-comment">//打开文件output.txt，写模式</span><br><span class="hljs-keyword">if</span> (in == <span class="hljs-literal">NULL</span> || out == <span class="hljs-literal">NULL</span>) &#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Error opening file.\n&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>; <span class="hljs-comment">// 错误处理</span><br>&#125;<br><span class="hljs-type">int</span> c;  <span class="hljs-comment">//循环读取input.txt并拷贝</span><br><span class="hljs-keyword">while</span>(c = fgetc(in) != EOF) &#123; <span class="hljs-comment">//从文件中读入字符，直到文件结束</span><br>    fputc(c, out); <span class="hljs-comment">//输出字符到文件</span><br>&#125;<br><br><span class="hljs-type">char</span> s[<span class="hljs-number">10</span>];<br><span class="hljs-type">char</span> *<span class="hljs-title function_">fgets</span><span class="hljs-params">(s,<span class="hljs-number">10</span>,in)</span>; <span class="hljs-comment">//常用读取，安全</span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">fputs</span><span class="hljs-params">(s,out)</span>; <span class="hljs-comment">//常用输出字符串到文件</span><br><br>fclose(in); <span class="hljs-comment">//关闭文件input.txt</span><br>fclose(out); <span class="hljs-comment">//关闭文件output.txt</span><br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<hr>
<h2 id="是的你可以查字典"><a href="#是的你可以查字典" class="headerlink" title="是的你可以查字典"></a>是的你可以查字典</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c">c =fgetc(in);  <span class="hljs-comment">//从文件（input.txt）中读入一个字符</span><br>fputc(c,out); <span class="hljs-comment">//输出一个字符到文件（output.txt）中</span><br>fgets(s,  n,  in); <span class="hljs-comment">//从 文件in上读入一行（最多读入n-1个字符），放入s 字符数组中。返回s或NULL。</span><br> <span class="hljs-built_in">fputs</span>( s,  out); <span class="hljs-comment">//把字符串s（不一定含\n）写入文件out中。返回非负数或EOF</span><br><span class="hljs-built_in">fscanf</span>(in, “%d”, &amp;score); <span class="hljs-comment">//从文件in中读入一个整数,存入score</span><br><span class="hljs-built_in">fprintf</span>( out, “%d\n”, score); <span class="hljs-comment">//输出一个整数到文件out中</span><br>fclose(fp); <span class="hljs-comment">//关闭文件，释放资源</span><br></code></pre></td></tr></table></figure>

<h3 id="关于fgets"><a href="#关于fgets" class="headerlink" title="关于fgets()"></a>关于fgets()</h3><p>函数声明<br><code>char *fgets(char *s,int n,FILE *);</code><br>可以知道返回值是一个指向字符数组的指针，或者是NULL<br>有几点需要注意：</p>
<ol>
<li>支持函数嵌套<br>puts(fgets(s,n,file)); &#x2F;&#x2F;可以直接输出读取的字符串</li>
<li>可使用返回值判断读取成功与否</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">if</span>((fp = fopen(filename, <span class="hljs-string">&quot;r&quot;</span>)) == <span class="hljs-literal">NULL</span>)&#123;<br>	      <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Can&#x27;t open file %s!\n&quot;</span>, filename);<br>	      <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<span class="hljs-comment">//表示程序异常结束</span><br>&#125;<br></code></pre></td></tr></table></figure>
<ol start="3">
<li>fgets在读取时会使用file中的文件位置指针，这并不是一个指针，而是一个整数，维护在FILE*结构体内部，它表示文件中的位置，类似于光标。每次读取后，文件位置指针会自动向后移动。因此如果需要多次读取同一行，需要使用rewind函数将文件位置指针重置到文件开头。如果需要精准控制读取位置，可以使用fseek函数。</li>
<li>fgets会读取换行符，但不会自动添加换行符，因此输出时需要手动添加。</li>
</ol>
<h2 id="问题4-文本查找"><a href="#问题4-文本查找" class="headerlink" title="问题4 文本查找"></a>问题4 文本查找</h2><p>使用scanf读取文件名和要查找的串，<br>使用fgets函数读取文件，fgets(s,n,in)<br>因此需要三个字符串<br>char filename[32],str[81], line[1024];<br>（一个文件名长度通常不超过32个字符（test.txt）；屏幕上一行通常显示80个字符；而1024是一般文件的最大物理行长度。当然这些取决于具体系统实现。）</p>
<h3 id="朴素字符串查找算法"><a href="#朴素字符串查找算法" class="headerlink" title="朴素字符串查找算法"></a>朴素字符串查找算法</h3><p>核心思想是通过fgets读取文件，再定义index函数查找串</p>
<p><strong>index函数</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">index</span><span class="hljs-params">(<span class="hljs-type">char</span> s[],<span class="hljs-type">char</span> t[])</span><br>&#123;<br>  <span class="hljs-type">int</span> i, j, k;<br>  <span class="hljs-comment">//在s中查找t</span><br>  <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>;s[i]!=<span class="hljs-string">&#x27;\0&#x27;</span>;i++)<br>  &#123;<br>    <span class="hljs-keyword">for</span>(j=i,k=<span class="hljs-number">0</span>;t[k]!=<span class="hljs-string">&#x27;\0&#x27;</span>&amp;&amp;s[j]==t[k];j++,k++)<br>    ; <br>    <span class="hljs-comment">//空语句循环，循环条件判断s[j]和t[k]，直到找到目标字段，并返回目标字段的位数k</span><br>    <span class="hljs-keyword">if</span> (t[k]==<span class="hljs-string">&#x27;\0&#x27;</span>) <span class="hljs-comment">//如果t[k]是&#x27;\0&#x27;，说明找到了目标字段</span><br>      <span class="hljs-keyword">return</span> i; <span class="hljs-comment">//返回目标字段在s中的起始位置</span><br>    <br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">//没有找到目标字段或者已经查找完毕，返回-1，while循环结束</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>一些关于字符串数组的补充</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> s[<span class="hljs-number">100</span>]; <span class="hljs-comment">//定义一个字符数组s，长度为100</span><br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>, s); <span class="hljs-comment">//读取一个字符串到s中，注意不能写成&amp;s</span><br><span class="hljs-type">char</span> *p = <span class="hljs-string">&quot;abc&quot;</span>; <span class="hljs-comment">//定义一个字符串指针p，指向字符串&quot;abc&quot;，只读</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s&quot;</span>, p); <span class="hljs-comment">//输出字符串p，注意不能写成&amp;p</span><br><span class="hljs-comment">//p[0] = &#x27;d&#x27;; //错误，不能修改字符串字面量</span><br><span class="hljs-comment">//p = &quot;def&quot;; //正确，指针可以指向新的字符串字面量</span><br></code></pre></td></tr></table></figure>



<p><strong>代码实现</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//textfind.c</span><br><span class="hljs-comment">//注意需要管理员权限</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAXLINE 1024</span><br><span class="hljs-comment">//读取文件，读取文件名，查找</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">index</span><span class="hljs-params">(<span class="hljs-type">char</span> s[],<span class="hljs-type">char</span> t[])</span>;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">char</span> filename[<span class="hljs-number">64</span>],str[<span class="hljs-number">81</span>],line[MAXLINE];<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>,filename);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>,str);<br>    FILE *in,*out;<br>    in = fopen(filename,<span class="hljs-string">&quot;r&quot;</span>);<br>    out = fopen(<span class="hljs-string">&quot;output.txt&quot;</span>,<span class="hljs-string">&quot;w&quot;</span>);<br><br>    <span class="hljs-keyword">if</span>(in == <span class="hljs-literal">NULL</span>)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Can&#x27;t open the input file&quot;</span>);<br>        system(<span class="hljs-string">&quot;pause&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>        <span class="hljs-keyword">if</span>(out == <span class="hljs-literal">NULL</span>)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Can&#x27;t open the output file&quot;</span>);<br>        system(<span class="hljs-string">&quot;pause&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">while</span>(fgets(line,MAXLINE<span class="hljs-number">-1</span>,in)!=<span class="hljs-literal">NULL</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(index(line,str)&gt;=<span class="hljs-number">0</span>)<br>        &#123;<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s&quot;</span>,line);<br>            <span class="hljs-built_in">fputs</span>(line,out);<br>        &#125;<br>    &#125;<br><br>    system(<span class="hljs-string">&quot;pause&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">index</span><span class="hljs-params">(<span class="hljs-type">char</span> s[],<span class="hljs-type">char</span> t[])</span><br>&#123;<br>    <span class="hljs-type">int</span> i,j,k;<br>    <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>;s[i]!=<span class="hljs-string">&#x27;\0&#x27;</span>;i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(j=i,k=<span class="hljs-number">0</span>;t[k]!=<span class="hljs-string">&#x27;\0&#x27;</span>&amp;&amp;s[j]==t[k];j++,k++)<br>        ;<br>        <span class="hljs-keyword">if</span> (t[k]==<span class="hljs-string">&#x27;\0&#x27;</span>)<br>        <span class="hljs-keyword">return</span> i;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="问题4-思考1-大小写"><a href="#问题4-思考1-大小写" class="headerlink" title="问题4 思考1 大小写"></a>问题4 思考1 大小写</h2><h3 id="大小写转换"><a href="#大小写转换" class="headerlink" title="大小写转换"></a>大小写转换</h3><p>tolower和toupper函数已经包含在&lt;ctype.h&gt;头文件中，可以直接使用。<br>但是可以自行写一下</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//ASCII码，大写在前，小写在后，中间有几位标点符号，不是直接接上的</span><br><span class="hljs-comment">//方法一</span><br><span class="hljs-type">char</span>  <span class="hljs-title function_">tolower</span><span class="hljs-params">(<span class="hljs-type">char</span> c)</span><br>&#123;<br>	<span class="hljs-keyword">if</span>( c &gt;=‘A’ &amp;&amp; c&lt;=‘Z’)<br>		<span class="hljs-keyword">return</span> ‘a’ – ‘A’ + c;<br>	<span class="hljs-keyword">return</span> c;<br>&#125; <br><span class="hljs-comment">//方法二，宏函数</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> tolower(c) 	(c&gt;=‘A’&amp;&amp;c&lt;=‘Z’?‘a’-’A’+ c : c)</span><br><span class="hljs-comment">//宏函数是替换参数，所以用?条件运算符</span><br></code></pre></td></tr></table></figure>

<h3 id="其他ctype-h函数"><a href="#其他ctype-h函数" class="headerlink" title="其他ctype.h函数"></a>其他ctype.h函数</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;ctype.h&gt;</span></span><br><span class="hljs-type">int</span>  <span class="hljs-title function_">isalpha</span><span class="hljs-params">(<span class="hljs-type">int</span> c)</span>	是否是字母<br><span class="hljs-type">int</span>  <span class="hljs-title function_">isdigit</span><span class="hljs-params">(<span class="hljs-type">int</span> c)</span>	是否是数字<br><span class="hljs-type">int</span>  <span class="hljs-title function_">islower</span><span class="hljs-params">(<span class="hljs-type">int</span> c)</span>	是否是小写字母<br><span class="hljs-type">int</span>  <span class="hljs-title function_">isupper</span><span class="hljs-params">(<span class="hljs-type">int</span> c)</span>	是否是大写字母<br><span class="hljs-type">int</span>  <span class="hljs-title function_">isspace</span><span class="hljs-params">(<span class="hljs-type">int</span> c)</span>	是否是空白字符<br><span class="hljs-type">int</span>  <span class="hljs-title function_">tolower</span><span class="hljs-params">(<span class="hljs-type">int</span> c)</span>	将大写字母为小写字母<br><span class="hljs-type">int</span>  <span class="hljs-title function_">toupper</span><span class="hljs-params">(<span class="hljs-type">int</span> c)</span>	将小写字母为大写字母<br></code></pre></td></tr></table></figure>
<p><strong>为什么返回值都是int</strong><br>因为字符在C语言中是以ASCII码的形式存储的，而ASCII码是一个整数，因此ctype.h中的函数返回值都是int类型。这样可以确保函数能够处理所有可能的字符，包括非字母和非数字字符。</p>
<h2 id="问题4-思考2-高级查找功能"><a href="#问题4-思考2-高级查找功能" class="headerlink" title="问题4 思考2 高级查找功能"></a>问题4 思考2 高级查找功能</h2><ul>
<li>问题4.1中index只能查找的是子字符串的首次出现。请考虑如何查找子字符串的最后一次出现？</li>
<li>如果要查找一个字符串在一个文件中的所有出现（如给出所有出现的行列位置），如何实现？（注意，index只能查找子字符串首次出现，如果一行中含有多个要查找的字符串怎么办？）(类似Office软件中的查找功能)</li>
<li>在一个文件中查找给定串并用另一个替换串，如何实现？ (Office软件中的替换功能)</li>
<li>如何实现模糊查找（如UNIX命令grep），如要查找的串形式为：comp?ter, com*er (?单字符匹配，*多字符匹配）</li>
</ul>
<p><strong>暂时跳过</strong></p>
<h2 id="问题4-思考3-另一种查找方法"><a href="#问题4-思考3-另一种查找方法" class="headerlink" title="问题4 思考3 另一种查找方法"></a>问题4 思考3 另一种查找方法</h2><p>前面的算法时间复杂度是O(n*m)，其中n为文本长度，m为模式串长度。可以考虑使用KMP算法，时间复杂度为O(n+m)，将在后续学习中介绍。<br><strong>另一种只需要一层循环的查找方法</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">index</span><span class="hljs-params">(<span class="hljs-type">char</span> s[], <span class="hljs-type">char</span> t[])</span><br>&#123;<br>    <span class="hljs-type">int</span> i=<span class="hljs-number">0</span>, j=<span class="hljs-number">0</span>;	 <span class="hljs-comment">//设置查找的起始位置</span><br>    <span class="hljs-keyword">while</span>(s[i] != ‘\<span class="hljs-number">0</span>’ &amp;&amp; t[j] != ‘\<span class="hljs-number">0</span>’) &#123;<br>        <span class="hljs-keyword">if</span>(s[i] == t[j]) &#123;		<span class="hljs-comment">//若字符相等，继续查找下一个字符</span><br>            i++; j++;<br>        &#125;<br>        <span class="hljs-keyword">else</span> &#123;	<span class="hljs-comment">//若字符不等，则s中退回到上次查找开始的下一个位置</span><br>            i = i-j+<span class="hljs-number">1</span>;<br>            j = <span class="hljs-number">0</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span>(t[j] == ‘\<span class="hljs-number">0</span>’)	<span class="hljs-comment">//查找到字符串t，返回t在s中的起始位置</span><br>        <span class="hljs-keyword">return</span> i-j;<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>并不是说原本那个两层循环不好，那个两层循环算法更简单，可读性更好</p>
<h2 id="问题5-计算小岛面积"><a href="#问题5-计算小岛面积" class="headerlink" title="问题5 计算小岛面积"></a>问题5 计算小岛面积</h2><hr>
<p><strong>【问题描述】</strong></p>
<p>用一个二维方阵（最小为 3×3，最大为 50×50）表示一片海域。方阵中的元素只由 <code>0</code> 和 <code>1</code> 组成，其中 <code>1</code> 表示海岸线。你需要计算由海岸线围起来的<strong>小岛面积</strong>，也就是：<strong>被 <code>1</code> 完全围起来的区域中 <code>0</code> 的个数</strong>。</p>
<p>如下图所示，8×8 的方阵所表示的小岛面积为 <code>9</code>：</p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">0 </span><span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span><br><span class="hljs-symbol">0 </span><span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span><br><span class="hljs-symbol">0 </span><span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span><br><span class="hljs-symbol">0 </span><span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span><br><span class="hljs-symbol">0 </span><span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span><br><span class="hljs-symbol">0 </span><span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span><br><span class="hljs-symbol">0 </span><span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span><br><span class="hljs-symbol">0 </span><span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure>

<p>上述方阵表示的海域满足以下两个条件：</p>
<ol>
<li>小岛只有一个；</li>
<li>用 <code>1</code> 表示的海岸线是封闭的（可以是凸的，也可以是凹的）。</li>
</ol>
<hr>
<p><strong>【输入形式】</strong></p>
<ul>
<li>第一行输入一个整数 <code>n</code>（表示方阵的阶数，满足 3 ≤ n ≤ 50）；</li>
<li>接下来的 <code>n</code> 行，每行输入 <code>n</code> 个 <code>0</code> 或 <code>1</code>，用空格隔开。</li>
</ul>
<hr>
<p><strong>【输出形式】</strong></p>
<ul>
<li>输出一个整数，表示被海岸线封闭起来的 <code>0</code> 的个数（即小岛面积）。</li>
</ul>
<hr>
<p><strong>【输入样例】</strong></p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">8</span><br><span class="hljs-symbol">0 </span><span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span><br><span class="hljs-symbol">0 </span><span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span><br><span class="hljs-symbol">0 </span><span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span><br><span class="hljs-symbol">0 </span><span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span><br><span class="hljs-symbol">0 </span><span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span><br><span class="hljs-symbol">0 </span><span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span><br><span class="hljs-symbol">0 </span><span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span><br><span class="hljs-symbol">0 </span><span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure>

<hr>
<p><strong>【输出样例】</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">9<br></code></pre></td></tr></table></figure>

<h3 id="二维（多维）数组"><a href="#二维（多维）数组" class="headerlink" title="二维（多维）数组"></a>二维（多维）数组</h3><p>在C语言中，二维数组可以看作是一个元素为另一个一维数组的一维数组<br>如<code>float y[4][3];</code><br><strong>初始化</strong><br>多维数组的初始化</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> y[<span class="hljs-number">4</span>][<span class="hljs-number">3</span>]=&#123;<span class="hljs-number">0</span>&#125;; <span class="hljs-comment">//所有元素初始化为0</span><br><br><span class="hljs-type">int</span> y[<span class="hljs-number">4</span>][<span class="hljs-number">3</span>] = &#123;	<br>&#123; <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span> &#125;,	<br>&#123; <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span> &#125;,	<br>&#123; <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span> &#125;,	<br>&#125;<br><span class="hljs-type">int</span> y[<span class="hljs-number">4</span>][<span class="hljs-number">3</span>] = &#123; <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span> &#125;; <br><span class="hljs-comment">//也同上，因为在C语言中，数组元素按行存贮。</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">1 3 5</span><br><span class="hljs-comment">2 4 6</span><br><span class="hljs-comment">3 5 7</span><br><span class="hljs-comment">*/</span><br><br><br><span class="hljs-type">int</span>  y[<span class="hljs-number">4</span>][<span class="hljs-number">3</span>] = &#123;<br>&#123;<span class="hljs-number">1</span>&#125;, &#123;<span class="hljs-number">2</span>&#125;, &#123;<span class="hljs-number">3</span>&#125;, &#123;<span class="hljs-number">4</span>&#125;<br>&#125;<br><span class="hljs-type">int</span> y[<span class="hljs-number">4</span>][<span class="hljs-number">3</span>] = &#123; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span> &#125;; <span class="hljs-comment">//同上，其他元素为0</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">1 0 0</span><br><span class="hljs-comment">2 0 0</span><br><span class="hljs-comment">3 0 0</span><br><span class="hljs-comment">4 0 0</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure>
<p><strong>仅仅是重写用例，仅用于搞清楚逻辑，算法过于暴力，优化空间巨大</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span> <span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">int</span> n;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;n);<br>    <span class="hljs-type">int</span> s[n][n];<br>    <span class="hljs-type">int</span> a[n*n];<br>    <span class="hljs-type">int</span> i,j,k;<br>    <span class="hljs-type">int</span> sum=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>        <span class="hljs-keyword">for</span> (j=<span class="hljs-number">0</span>;j&lt;n;j++)<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;s[i][j]);<br>    <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>        <span class="hljs-keyword">for</span>(j=<span class="hljs-number">0</span>;j&lt;n;j++)<br>            &#123;<br>                <span class="hljs-type">int</span> c =<span class="hljs-number">0</span>;<br>                <span class="hljs-keyword">if</span>(s[i][j]==<span class="hljs-number">0</span>)<br>                    &#123;<br>                        <span class="hljs-comment">//往右</span><br>                        <span class="hljs-keyword">for</span> (k=i;k&lt;n;k++)<br>                        <span class="hljs-keyword">if</span>(s[k][j]==<span class="hljs-number">1</span>)<br>                        &#123;<br>                            c++;<br>                            <span class="hljs-keyword">break</span>;<br>                        &#125;<br>                        <span class="hljs-comment">//往左</span><br>                        <span class="hljs-keyword">for</span>(k=i;k&gt;=<span class="hljs-number">0</span>;k--)<br>                        <span class="hljs-keyword">if</span>(s[k][j]==<span class="hljs-number">1</span>)<br>                        &#123;<br>                            c++;<br>                            <span class="hljs-keyword">break</span>;<br>                        &#125;<br>                        <span class="hljs-comment">//往上</span><br>                        <span class="hljs-keyword">for</span>(k=j;k&gt;=<span class="hljs-number">0</span>;k--)<br>                        <span class="hljs-keyword">if</span>(s[i][k]==<span class="hljs-number">1</span>)<br>                        &#123;<br>                            c++;<br>                            <span class="hljs-keyword">break</span>;<br>                        &#125;<br>                        <span class="hljs-comment">//往下</span><br>                        <span class="hljs-keyword">for</span>(k=j;k&lt;n;k++)<br>                        <span class="hljs-keyword">if</span>(s[i][k]==<span class="hljs-number">1</span>)<br>                        &#123;<br>                            c++;<br>                            <span class="hljs-keyword">break</span>;<br>                        &#125;<br>                    &#125;<br>                <span class="hljs-keyword">if</span>(c==<span class="hljs-number">4</span>)<br>                &#123;<br>                    sum++;<br>                &#125;<br>            &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d&quot;</span>,sum);<br>    system(<span class="hljs-string">&quot;pause&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>PPT上似乎没有讨论优化（？），有空再说吧</strong></p>
<h1 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h1><h2 id="定义和一些常见的指针"><a href="#定义和一些常见的指针" class="headerlink" title="定义和一些常见的指针"></a>定义和一些常见的指针</h2><p>指针变量的定义（说明）：<br>&lt;类型&gt;  *&lt;变量&gt;；<br>指针是用所指对象类型来表征的。如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span>  *px;		    <span class="hljs-comment">/* 指向整型的指针 */</span><br><span class="hljs-type">char</span> *pc;		<span class="hljs-comment">/* 指向字符型的指针 */</span><br><span class="hljs-type">char</span> *acp[<span class="hljs-number">10</span>];  <span class="hljs-comment">/* 指向字符型的指针构成的数组，指针数组 */</span><br><span class="hljs-type">char</span> (*pac)[<span class="hljs-number">10</span>];    <span class="hljs-comment">/* 指向字符型数组的指针，数组指针 */</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">f</span><span class="hljs-params">( )</span>;		    <span class="hljs-comment">/* 返回值为整型的函数 */</span><br><span class="hljs-type">int</span> *<span class="hljs-title function_">fpi</span><span class="hljs-params">( )</span>;	    <span class="hljs-comment">/* 返回值为指向整型的指针的函数，指针函数 */</span><br><span class="hljs-type">int</span> (*pfi)();    <span class="hljs-comment">/*指向一个返回值为整型的函数的指针，函数指针*/</span><br></code></pre></td></tr></table></figure>
<h2 id="指针与地址"><a href="#指针与地址" class="headerlink" title="指针与地址"></a>指针与地址</h2><h3 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h3><ul>
<li>‘&amp;’：取地址</li>
<li>‘*’：间接引用&#x2F;抵引用，在指针定义时使用，表示指针指向的变量类型；在指针使用时，表示访问指针所指向的变量的值。</li>
</ul>
<p><strong>eg1</strong> </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span>  i = <span class="hljs-number">10</span>, y=<span class="hljs-number">20</span>, *pi;<br>pi = &amp;i;  <span class="hljs-comment">/*将变量i的地址赋给指针变量pi，称pi指向i; */</span><br>y = *pi; <span class="hljs-comment">/*取pi所指对象的值赋给y，即取pi中所存地址中的内容*/</span><br>pi = &amp;y;  <span class="hljs-comment">/*将变量y的地址赋给指针变量pi，称pi指向y; */</span><br></code></pre></td></tr></table></figure>
<p><strong>eg2</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> x = <span class="hljs-number">100</span>, y;<br><span class="hljs-type">int</span> *px;<br>px = &amp;x;  <span class="hljs-comment">//将x的地址赋给px，px指向x</span><br><span class="hljs-comment">//之后凡是对x的引用，都可以用*px来代替</span><br>y = *px;  <span class="hljs-comment">//将px所指向的变量x的值赋给y</span><br></code></pre></td></tr></table></figure>

<p><strong>注意使用任何指针变量之前必须先给它赋一个所指合法具体对象的地址值</strong><br>也就是说要先让指针指向一个合法的内存地址，否则会导致未定义行为（如访问非法内存地址）<br><strong>定义任何变量时，都是在内存上开辟一块空间，指针也是一样，只不过指针存储的是一个地址值，而不是具体的值。</strong><br>你可以让指针指向一个已经定义好的变量的地址，或者让指针指向一个动态分配的内存空间（如使用malloc函数），但不能让指针指向一个未定义的变量或未分配的内存空间。</p>
<p><strong>错误例</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> x = <span class="hljs-number">1</span>;<br><span class="hljs-type">int</span> *px;<br>*px = x;<br><span class="hljs-comment">//缺少px = &amp;x;  //先将x的地址赋给px</span><br><br><br><span class="hljs-type">char</span> *<span class="hljs-built_in">string</span>;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>, <span class="hljs-built_in">string</span>);<br><span class="hljs-built_in">strcpy</span>(<span class="hljs-built_in">string</span>, <span class="hljs-string">&quot;Hello&quot;</span>);<br><span class="hljs-comment">//缺少string = malloc(100);  //先分配内存空间</span><br></code></pre></td></tr></table></figure>

<h3 id="指针的地址"><a href="#指针的地址" class="headerlink" title="指针的地址"></a>指针的地址</h3><p>如何让指针指向一个具体对象，下面是三种方法</p>
<ol>
<li>运算符&amp;直接取已经存在的地址</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> n = <span class="hljs-number">10</span>,*p;<br>px = &amp;n; <span class="hljs-comment">//将n的地址赋给指针p</span><br></code></pre></td></tr></table></figure>
<ol start="2">
<li>将另一个同类型指针的地址赋给当前指针，两个指针会指向同一个地址</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> n = <span class="hljs-number">10</span>,*p1,*p2<br><span class="hljs-type">char</span> s[<span class="hljs-number">10</span>], *p3;<br>p1 = &amp;n; <span class="hljs-comment">//将n的地址赋给指针p1</span><br>p2 = p1; <span class="hljs-comment">//将p1的地址赋给指针p2，p2也指向n</span><br>p3 = s; <span class="hljs-comment">//将s的地址赋给指针p3，p3指向s的首元素</span><br></code></pre></td></tr></table></figure>
<ol start="3">
<li>使用动态内存分配函数（如malloc）分配一块内存空间，并将其地址赋给指针</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">p = (<span class="hljs-type">char</span>*)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">strlen</span>(s)+<span class="hljs-number">1</span>); <span class="hljs-comment">//分配一块内存空间，大小为s的长度加1（包括&#x27;\0&#x27;），并将其地址赋给指针p</span><br></code></pre></td></tr></table></figure>
<h3 id="关于malloc函数"><a href="#关于malloc函数" class="headerlink" title="关于malloc函数"></a>关于malloc函数</h3><p>为指针动态申请一块内存空间，返回值是一个指向这块内存空间的指针。</p>
<ol>
<li>函数声明</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">void</span> *<span class="hljs-title function_">malloc</span><span class="hljs-params">(<span class="hljs-type">size_t</span> size)</span>;<br><span class="hljs-comment">//size_t表示无符号整数类型（相当于unsigned int），表示要分配的内存大小（以字节为单位）。</span><br><span class="hljs-comment">//size是一个整数，表示要分配的内存大小,以字节为单位。</span><br><span class="hljs-comment">//注意：malloc函数返回的是一个void指针，需要强制类型转换为具体的指针类型，如(char*)或(int*)等。</span><br></code></pre></td></tr></table></figure>
<ol start="2">
<li>用例</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> p[<span class="hljs-number">10</span>]; <br><span class="hljs-type">char</span> *s;<br><span class="hljs-type">int</span> *intptr;<br>s = (<span class="hljs-type">char</span>*)<span class="hljs-built_in">malloc</span>(<span class="hljs-number">32</span>); <span class="hljs-comment">//分配32字节的内存空间，返回值是一个指向这块内存空间的指针</span><br>s = (<span class="hljs-type">char</span>*)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">strlen</span>(p)+<span class="hljs-number">1</span>); <span class="hljs-comment">//分配p的长度加1字节的内存空间，正好能存放p的内容和&#x27;\0&#x27;结束符</span><br>intptr = (<span class="hljs-type">int</span>*)<span class="hljs-built_in">malloc</span>(<span class="hljs-number">10</span>*<span class="hljs-keyword">sizeof</span>(<span class="hljs-type">int</span>)); <span class="hljs-comment">//分配10个int类型的内存空间，一个int类型通常是4字节，因此总共分配40字节的内存空间</span><br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">sizeof运算符：返回一个对象或类型所占的字节数</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>free函数<br>使用malloc函数分配的内存空间需要使用free函数释放，否则会造成内存泄漏。<br>如上例</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">free</span>(s); <span class="hljs-comment">//释放s指向的内存空间</span><br><span class="hljs-built_in">free</span>(intptr); <span class="hljs-comment">//释放intptr指向的内存空间</span><br></code></pre></td></tr></table></figure>
<ol start="4">
<li>free和malloc都定义在&lt;stdlib.h&gt;头文件中</li>
</ol>
<p><strong>一定要记住malloc完了要free</strong></p>
<h2 id="指针运算"><a href="#指针运算" class="headerlink" title="指针运算"></a>指针运算</h2><ol>
<li>指针可以和整数进行加减运算<br>若p为指针，则p+n和p-n是合法的，同样p++也是合法的，它们的结果同指针所指对象类型相关。如果p是指向数组某一元素的指针，则p+1及p++为数组下一元素的指针</li>
<li>p1和p2同一类型时，可以赋值</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> a =<span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> *p1, *p2;<br>p1 = &amp;a; <span class="hljs-comment">//将a的地址赋给p1</span><br>p2 = p1; <span class="hljs-comment">//将p1的地址赋给p2，p2也指向a</span><br><span class="hljs-comment">//注意与strcpy的区别，strcpy是字符串拷贝，而这里是指针赋值</span><br><span class="hljs-built_in">strcpy</span>(p1, p2); <span class="hljs-comment">//错误，p1和p2是指针，不能直接用strcpy拷贝</span><br></code></pre></td></tr></table></figure>
<ol start="3">
<li>指针可以进行比较</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-built_in">array</span>[N],*p;<br><span class="hljs-keyword">for</span>(p=&amp;<span class="hljs-built_in">array</span>[<span class="hljs-number">0</span>]; p&lt;=&amp;<span class="hljs-built_in">array</span>[N<span class="hljs-number">-1</span>];p++)<br>…<br><span class="hljs-comment">//p指向数组的首元素到尾元素</span><br></code></pre></td></tr></table></figure>
<ol start="4">
<li>两个指向同一数组成员的指针相减，结果是两个指针之间的元素个数</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> s[<span class="hljs-number">10</span>], *p1, *p2;<br>p1 = &amp;s[<span class="hljs-number">0</span>]; <span class="hljs-comment">//指向s的首元素</span><br>p2 = &amp;s[<span class="hljs-number">9</span>]; <span class="hljs-comment">//指向s的尾元素</span><br><span class="hljs-type">int</span> <span class="hljs-built_in">strlen</span> = p2 - p1 + <span class="hljs-number">1</span>; <span class="hljs-comment">//计算字符串长度，+1是因为包括&#x27;\0&#x27;结束符</span><br></code></pre></td></tr></table></figure>
<ol start="5">
<li>两个指针不能相加</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> s[<span class="hljs-number">10</span>], *low, *high;<br>low = &amp;s[<span class="hljs-number">0</span>]; <span class="hljs-comment">//指向s的首元素</span><br>high = &amp;s[<span class="hljs-number">9</span>]; <span class="hljs-comment">//指向s的尾元素</span><br><span class="hljs-type">char</span> *mid = (low + high)/<span class="hljs-number">2</span>; <span class="hljs-comment">//错误，不能直接相加两个指针</span><br><span class="hljs-type">char</span> *mid = low + (high - low)/<span class="hljs-number">2</span>; <span class="hljs-comment">//正确，先计算两个指针之间的距离，再除以2得到中间位置</span><br></code></pre></td></tr></table></figure>

<p><strong>注意：由于数据类型不同，指针加减的结果是以指针所指对象类型的大小为单位的</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span>  a[<span class="hljs-number">10</span>];<br><span class="hljs-type">int</span>  *pi= &amp;a[<span class="hljs-number">0</span>];<br><span class="hljs-type">char</span> str[<span class="hljs-number">10</span>];<br><span class="hljs-type">char</span> *pc= &amp;str[<span class="hljs-number">0</span>];<br><br>pi++;   <span class="hljs-comment">/*若int占4个字节, 此时pi增加一个单位, 即四个字节, 结果为0x0104*/</span><br>pc++;  <span class="hljs-comment">/*若char占1个字节, 此时pc增加一个单位, 即一个字节, 结果为0x0101*/</span><br></code></pre></td></tr></table></figure>

<p><strong>一些辨析</strong><br>p++和p+1的区别<br>y &#x3D; *px + 1; 和y &#x3D; *(px+1);的区别<br>y &#x3D; (*px)++和y &#x3D; *px++;的区别</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c">p++ <span class="hljs-comment">//指针p向后移动一个单位，指向下一个元素</span><br>p+<span class="hljs-number">1</span> <span class="hljs-comment">//指针p向后移动一个单位，指向下一个元素，但p本身不变</span><br><br>y = *px + <span class="hljs-number">1</span>; <span class="hljs-comment">//将px所指向的变量的值加1，结果赋给y</span><br>y = *(px+<span class="hljs-number">1</span>); <span class="hljs-comment">//将px所指向的下一个变量的值赋给y</span><br><br>y = (*px)++; <span class="hljs-comment">//将px所指向的变量的值赋给y，然后将px所指向的变量的值加1</span><br>y = *px++; <span class="hljs-comment">//将px所指向的变量的值赋给y，然后将指针p向后移动一个单位，指向下一个元素</span><br></code></pre></td></tr></table></figure>

<h2 id="问题6-输出输入行中的最长行"><a href="#问题6-输出输入行中的最长行" class="headerlink" title="问题6 输出输入行中的最长行"></a>问题6 输出输入行中的最长行</h2><h3 id="关于为什么要向函数传入指针"><a href="#关于为什么要向函数传入指针" class="headerlink" title="关于为什么要向函数传入指针"></a>关于为什么要向函数传入指针</h3><p>eg. swap()</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">void</span> <span class="hljs-title function_">swap</span><span class="hljs-params">(<span class="hljs-type">int</span> *a, <span class="hljs-type">int</span> *b)</span> &#123;<br>    <span class="hljs-type">int</span> temp = *a;<br>    *a = *b;<br>    *b = temp;<br>&#125;<br><span class="hljs-comment">//经典的交换两个整数的函数</span><br><br><span class="hljs-type">void</span> <span class="hljs-title function_">swap_c</span><span class="hljs-params">(<span class="hljs-type">char</span> *a, <span class="hljs-type">char</span> *b)</span> &#123;<br>    <span class="hljs-type">char</span> temp = *a;<br>    *a = *b;<br>    *b = temp;<br>&#125;<br><span class="hljs-comment">//交换两个字符的函数，可以交换字符串中指定的字符</span><br><br><br><span class="hljs-type">void</span> <span class="hljs-title function_">swap_s</span><span class="hljs-params">(<span class="hljs-type">char</span> **a, <span class="hljs-type">char</span> **b)</span> &#123;<br>    <span class="hljs-type">char</span> *temp = *a;<br>    *a = *b;<br>    *b = temp;<br>&#125;<br><span class="hljs-comment">//交换两个字符串的函数，传入指针的指针是为了能够修改原来的字符串指针，使得交换后的字符串仍然可以被访问。</span><br><br><span class="hljs-comment">//错误例</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">swap_s</span><span class="hljs-params">(<span class="hljs-type">char</span> *a,<span class="hljs-type">char</span> *b)</span> &#123;<br>    <span class="hljs-type">char</span> *temp = a; <span class="hljs-comment">//这里只是交换了指针的值，并没有修改原来的字符串指针</span><br>    a = b;<br>    b = temp;<br>&#125;<br><span class="hljs-comment">//只在函数内部交换了指针的值，根本没有对外部产生影响</span><br></code></pre></td></tr></table></figure>
<p><strong>对于C语言来说，函数传入值是按值传递的，传入值都是一个新的拷贝，即函数内部对参数的修改不会影响到外部变量。</strong><br>但地址在内存中唯一，即使函数中是参数的副本，只要解引用的是这个唯一地址，修改就会反映在原变量上。</p>
<h3 id="非常简洁的strcpy函数"><a href="#非常简洁的strcpy函数" class="headerlink" title="非常简洁的strcpy函数"></a>非常简洁的strcpy函数</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">void</span> <span class="hljs-title function_">strcopy</span><span class="hljs-params">(<span class="hljs-type">char</span> *s,  <span class="hljs-type">const</span> <span class="hljs-type">char</span> *t)</span><br>&#123;<br>    <span class="hljs-keyword">while</span>((*s++ = *t++));<br>&#125;<br><span class="hljs-comment">//while循环的条件是(*s++ = *t++)，即将t所指向的字符赋值给s所指向的字符，并将s和t都向后移动一个位置，直到遇到&#x27;\0&#x27;结束符为止。</span><br></code></pre></td></tr></table></figure>

<h3 id="常用的字符串函数"><a href="#常用的字符串函数" class="headerlink" title="常用的字符串函数"></a>常用的字符串函数</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><span class="hljs-type">int</span> <span class="hljs-title function_">strlen</span><span class="hljs-params">(<span class="hljs-type">char</span> s[])</span>;   <span class="hljs-comment">/*计算字符串长度, 字符串以\0结果*/</span><br><span class="hljs-type">char</span> *<span class="hljs-title function_">strcpy</span><span class="hljs-params">(<span class="hljs-type">char</span> s[], <span class="hljs-type">char</span> t[])</span>; <span class="hljs-comment">/*将字符串t拷贝到字符串s中*/</span><br><span class="hljs-type">char</span> *<span class="hljs-title function_">strcat</span><span class="hljs-params">(<span class="hljs-type">char</span> s[], <span class="hljs-type">char</span> t[])</span>;  <span class="hljs-comment">/*将字符串t拷贝到字符串s尾部*/</span> <br><span class="hljs-type">int</span> <span class="hljs-title function_">strcmp</span><span class="hljs-params">(<span class="hljs-type">char</span> s[], <span class="hljs-type">char</span> t[])</span>;  <span class="hljs-comment">/*比较两个字符串，找第一个不相等的字符,若s&gt;t,则返回大于0的数;若s&lt;t,则返回小于0的数;若相等, 返回0 */</span><br></code></pre></td></tr></table></figure>

<p>C提供的高效函数接口（不仅仅用于字符串）：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><span class="hljs-type">void</span> *<span class="hljs-title function_">memcpy</span><span class="hljs-params">(<span class="hljs-type">void</span> *s, <span class="hljs-type">void</span> *t, <span class="hljs-type">int</span> n)</span>;<br><span class="hljs-type">void</span> *<span class="hljs-title function_">memmove</span><span class="hljs-params">(<span class="hljs-type">void</span> *s, <span class="hljs-type">void</span> *t, <span class="hljs-type">int</span> n)</span>;<br><span class="hljs-type">int</span> <span class="hljs-title function_">memcmp</span><span class="hljs-params">(<span class="hljs-type">void</span> *s, <span class="hljs-type">void</span> *t, <span class="hljs-type">int</span> n)</span>;<br></code></pre></td></tr></table></figure>

<h3 id="find-long-str-c"><a href="#find-long-str-c" class="headerlink" title="find_long_str.c"></a>find_long_str.c</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta"># <span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta"># <span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAXLINE 1024</span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">strlen</span><span class="hljs-params">(<span class="hljs-type">char</span> s[])</span><br>&#123;<br>    <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>(s[i]!=<span class="hljs-string">&#x27;\0&#x27;</span>)<br>        &#123;<br>            i++;<br>        &#125;<br>    <span class="hljs-keyword">return</span> i + <span class="hljs-number">1</span>;<br><br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">str_copy</span><span class="hljs-params">(<span class="hljs-type">char</span> *s,  <span class="hljs-type">const</span> <span class="hljs-type">char</span> *t)</span><br>&#123;<br>    <span class="hljs-keyword">while</span>((*s++ = *t++));<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">char</span> line[MAXLINE];<br>    <span class="hljs-type">char</span> save[MAXLINE];<br>    <span class="hljs-type">int</span> max = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>(gets(line)!=<span class="hljs-literal">NULL</span>)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(<span class="hljs-built_in">strlen</span>(line)&gt;max)<br>            &#123;<br>                max = <span class="hljs-built_in">strlen</span>(line);<br>                str_copy(save,line);<br>            &#125;<br>        &#125;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s&quot;</span>,save);<br>    system(<span class="hljs-string">&quot;pause&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>


<h3 id="用指针优化"><a href="#用指针优化" class="headerlink" title="用指针优化"></a>用指针优化</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//省去了strcpy的遍历复制，直接进行指针交换</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAXLINE 1024</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">strlen</span><span class="hljs-params">(<span class="hljs-type">char</span> s[])</span><br>&#123;<br>    <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (s[i++]!=<span class="hljs-string">&#x27;\0&#x27;</span>);<br>    <span class="hljs-keyword">return</span> i;<br><br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span> <span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">char</span> buf1[MAXLINE],buf2[MAXLINE];<br>    <span class="hljs-type">int</span> max=<span class="hljs-number">0</span>;<br>    <span class="hljs-type">char</span> *saveptr = buf1;<br>    <span class="hljs-type">char</span> *curptr = buf2;<br>    <span class="hljs-type">char</span> *temp;         <span class="hljs-comment">//交换，而且必须交换</span><br><br>    <span class="hljs-keyword">while</span> (gets(curptr)!=<span class="hljs-literal">NULL</span>)<br>    &#123;<br>        <span class="hljs-type">int</span> len = <span class="hljs-built_in">strlen</span>(curptr);<br>        <span class="hljs-keyword">if</span>(len&gt;max)<br>        &#123;<br>            max = len;<br>            temp = curptr;<br>            curptr = saveptr;<br>            saveptr = temp;<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s&quot;</span>,saveptr);<br>    system(<span class="hljs-string">&quot;pause&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><br><br>&#125;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">测试点</span><br><span class="hljs-comment">This is a short line.</span><br><span class="hljs-comment">This one is even shorter.</span><br><span class="hljs-comment">But this line is significantly longer than the previous two and should be detected as the longest one.</span><br><span class="hljs-comment">Tiny.</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure>
<h3 id="为什么必须交换指针"><a href="#为什么必须交换指针" class="headerlink" title="为什么必须交换指针"></a>为什么必须交换指针</h3><p>假如我只写<code>curptr = saveptr;</code>，那么下一次gets(curptr)就会覆盖掉saveptr的内容，因为curptr和saveptr指向的是同一块内存空间。<br>交换指针后，curptr和saveptr指向不同的内存空间，curptr指向当前行的内容，saveptr指向最长行的内容，这样就不会覆盖了。<br>可以保护saveptr的内容不被覆盖。</p>
<h2 id="指针与数组的补充"><a href="#指针与数组的补充" class="headerlink" title="指针与数组的补充"></a>指针与数组的补充</h2><h3 id="strlen和strcpy的实现"><a href="#strlen和strcpy的实现" class="headerlink" title="strlen和strcpy的实现"></a>strlen和strcpy的实现</h3><p><strong>仅做记录，想不起来再看看，写法很多</strong><br><em>注意在函数定义中形参形式char s[ ]和char *s完全等价，即指向某类型的指针与该类型没有指明长度的数组是同一回事。用哪个取决于在函数里表达式的写法。</em></p>
<ol>
<li>strlen的实现</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//1) 数组方式</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">strlen</span><span class="hljs-params">( <span class="hljs-type">char</span> s[ ])</span><br>&#123;<br><span class="hljs-type">int</span> n = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span>(s[n] != ‘\<span class="hljs-number">0</span>’)<br>++n;<br><span class="hljs-keyword">return</span> (n);<br>&#125;<br><span class="hljs-comment">//2) 指针方式</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">strlen</span><span class="hljs-params">(<span class="hljs-type">char</span> *s)</span><br>&#123;<br><span class="hljs-type">int</span> n;<br><span class="hljs-keyword">for</span>(n=<span class="hljs-number">0</span>; *s != ‘\<span class="hljs-number">0</span>’; s++)<br>n++;<br><span class="hljs-keyword">return</span> (n);<br>&#125;<br></code></pre></td></tr></table></figure>
<ol start="2">
<li>strcpy的实现</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//1) 数组方式</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">strcpy</span><span class="hljs-params">(<span class="hljs-type">char</span> s[ ], <span class="hljs-type">char</span> t[ ])</span><br>&#123;<br><span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span>((s[i] = t[i]) != ‘\<span class="hljs-number">0</span>’)<br>i++;<br>&#125;<br><span class="hljs-comment">//2) 指针方式</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">strcpy</span><span class="hljs-params">(<span class="hljs-type">char</span> *s, <span class="hljs-type">char</span> *t)</span><br>&#123;<br><span class="hljs-keyword">while</span>((*s = *t) != ‘\<span class="hljs-number">0</span>’)&#123;<br>s++; t++;<br>&#125;<br>&#125;<br><span class="hljs-comment">//3) 指针方式（更简洁）</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">strcpy</span><span class="hljs-params">(<span class="hljs-type">char</span> *s, <span class="hljs-type">char</span> *t)</span><br>&#123;<br><span class="hljs-keyword">while</span>((*s++ = *t++));<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="深拷贝和浅拷贝"><a href="#深拷贝和浅拷贝" class="headerlink" title="深拷贝和浅拷贝"></a>深拷贝和浅拷贝</h3><ol>
<li>浅拷贝<br>通过指针赋值，如: px &#x3D; py;两指针指向同一对象。该拷贝的最大负作用是当其中的一个指针被释放，另一个指针将成为无所指对象（指针悬挂）。(Shallow copy-浅拷贝)</li>
<li>深拷贝<br>通过strcpy函数，如：strcpy(px, py); 这种拷贝使得两个指针所指内容相同，但存放在各自的空间中。( Deep copy-深拷贝 )</li>
</ol>
<h4 id="指针悬挂（悬空指针）"><a href="#指针悬挂（悬空指针）" class="headerlink" title="指针悬挂（悬空指针）"></a>指针悬挂（悬空指针）</h4><p><strong>简单指针悬挂</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> *p = (<span class="hljs-type">int</span> *)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-type">int</span>)); <span class="hljs-comment">//分配内存空间</span><br>*p = <span class="hljs-number">10</span>; <span class="hljs-comment">//给p所指向的内存空间赋值</span><br><span class="hljs-built_in">free</span>(p); <span class="hljs-comment">//释放内存空间</span><br>*p = <span class="hljs-number">99</span>; <span class="hljs-comment">//错误，p所指向的内存空间已经被释放，p成为悬挂指针</span><br></code></pre></td></tr></table></figure>

<p><strong>浅拷贝导致的指针悬挂</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>, b = <span class="hljs-number">20</span>;<br><span class="hljs-type">int</span> *px = &amp;a; <span class="hljs-comment">//px指向a</span><br><span class="hljs-type">int</span> *py;    <span class="hljs-comment">//野指针，仅做示例</span><br>py = px; <span class="hljs-comment">//py指向a，和px指向同一地址</span><br><span class="hljs-built_in">free</span>(px); <span class="hljs-comment">//释放px所指向的内存空间，py仍然指向a，但a已经被释放，py成为悬挂指针</span><br></code></pre></td></tr></table></figure>

<p><strong>函数调用导致的指针悬挂</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">char</span> *p;<br>    ...<br>    p = fun();  <span class="hljs-comment">// 🚨 调用函数，接收返回的 char* 指针</span><br>    ...<br>&#125;<br><br><span class="hljs-type">char</span> *<span class="hljs-title function_">fun</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">char</span> *p;<br>    <span class="hljs-type">char</span> str[<span class="hljs-number">20</span>] = <span class="hljs-string">&quot;Hello World&quot;</span>;  <span class="hljs-comment">// ✅ 局部字符数组，分配在栈上</span><br>    ...<br>    p = str;<br>    <span class="hljs-keyword">return</span> p;  <span class="hljs-comment">// 🚨 返回的是局部变量 str 的地址</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>str是函数内部的局部变量，当函数执行完毕后，栈帧被销毁，str的内存空间被释放，返回了一块已经被释放的内存地址给p，这样p就成为了悬挂指针。访问p会导致未定义行为。<br><strong>解决办法</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//方法一：使用 malloc() 分配堆内存（深拷贝）</span><br><span class="hljs-type">char</span> *<span class="hljs-title function_">fun</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">char</span> *p = (<span class="hljs-type">char</span> *)<span class="hljs-built_in">malloc</span>(<span class="hljs-number">20</span>);<br>    <span class="hljs-built_in">strcpy</span>(p, <span class="hljs-string">&quot;Hello World&quot;</span>);<br>    <span class="hljs-keyword">return</span> p;  <span class="hljs-comment">// OK：返回的是堆内存</span><br>&#125;<br><span class="hljs-comment">//但注意，调用者需要负责释放这块内存</span><br><br><span class="hljs-comment">//方法二：使用静态变量（静态存储期）</span><br><span class="hljs-type">char</span> *<span class="hljs-title function_">fun</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">static</span> <span class="hljs-type">char</span> str[<span class="hljs-number">20</span>] = <span class="hljs-string">&quot;Hello World&quot;</span>;<br>    <span class="hljs-keyword">return</span> str;  <span class="hljs-comment">// OK：静态变量在函数退出后仍然有效</span><br>&#125;<br><br></code></pre></td></tr></table></figure>

<h4 id="野指针"><a href="#野指针" class="headerlink" title="野指针"></a>野指针</h4><p>上面定义过一个野指针</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> *py; <span class="hljs-comment">//野指针，未初始化，指向未知地址</span><br></code></pre></td></tr></table></figure>
<p><strong>危害</strong><br>野指针会导致程序访问非法内存地址，可能引发段错误（Segmentation Fault）或其他未定义行为。使用野指针可能会导致程序崩溃、数据损坏或安全漏洞。<br><strong>解决办法</strong></p>
<ol>
<li>初始化指针</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> *py = <span class="hljs-literal">NULL</span>; <span class="hljs-comment">//初始化为NULL，表示指针不指向任何有效地址</span><br></code></pre></td></tr></table></figure>
<ol start="2">
<li>在使用指针之前，确保它指向一个有效的内存地址</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> *py = (<span class="hljs-type">int</span> *)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-type">int</span>)); <span class="hljs-comment">//分配内存空间</span><br></code></pre></td></tr></table></figure>
<ol start="3">
<li>在使用完指针后，及时释放内存并将指针置为NULL</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">free</span>(py); <span class="hljs-comment">//释放内存</span><br>py = <span class="hljs-literal">NULL</span>; <span class="hljs-comment">//将指针置为NULL，避免野指针</span><br></code></pre></td></tr></table></figure>
<p><strong>一种良好的写法</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> *p = (<span class="hljs-type">int</span> *)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-type">int</span>) * <span class="hljs-number">10</span>);<br><span class="hljs-keyword">if</span> (p != <span class="hljs-literal">NULL</span>) &#123;<br>    <span class="hljs-comment">// 使用 p 做点事情</span><br>    <span class="hljs-built_in">free</span>(p);<br>    p = <span class="hljs-literal">NULL</span>;   <span class="hljs-comment">// ✅ 避免后续再次访问非法内存</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>这种写法确保了在使用指针之前检查是否成功分配内存，并在使用完毕后将指针置为NULL，避免野指针的出现</p>
<h4 id="堆和栈（查缺补漏）"><a href="#堆和栈（查缺补漏）" class="headerlink" title="堆和栈（查缺补漏）"></a>堆和栈（查缺补漏）</h4><table>
<thead>
<tr>
<th>特性</th>
<th>栈（Stack）</th>
<th>堆（Heap）</th>
</tr>
</thead>
<tbody><tr>
<td>分配方式</td>
<td>编译器自动分配（静态大小）</td>
<td>程序员手动申请 (<code>malloc</code>&#x2F;<code>new</code>)，手动释放</td>
</tr>
<tr>
<td>生命周期</td>
<td>函数调用时创建，函数返回时自动销毁</td>
<td>手动释放前一直存在（哪怕函数已退出）</td>
</tr>
<tr>
<td>分配速度</td>
<td>⚡ 非常快（连续内存、编译期决定）</td>
<td>🐢 较慢（动态分配、操作系统管理）</td>
</tr>
<tr>
<td>内存位置</td>
<td>内存的高地址（地址向下增长）</td>
<td>内存的低地址（地址向上增长）</td>
</tr>
<tr>
<td>空间大小</td>
<td>通常较小（如几MB）</td>
<td>通常较大（操作系统最大支持）</td>
</tr>
<tr>
<td>安全性</td>
<td>相对安全，编译器管理</td>
<td>容易出错，可能内存泄漏、悬空指针等</td>
</tr>
<tr>
<td>示例</td>
<td><code>char buf[100];</code>（局部数组）</td>
<td><code>char *p = malloc(100);</code></td>
</tr>
</tbody></table>
<p><strong>注意</strong>：栈内存是自动管理的，函数返回时会自动释放；堆内存需要手动释放，否则会造成内存泄漏。<br><strong>使用场景</strong>：栈适合存储小数据（局部变量、函数参数等），堆适合存储大数据（动态数组、链表、树等，以及需要跨函数使用的数据）。</p>
<h2 id="指针数组"><a href="#指针数组" class="headerlink" title="指针数组"></a>指针数组</h2><p><code>char *p [10];</code><br>首先他是一个指向字符串类型的指针char <em>p，其次他是一个数组[10]，所以是指针数组<br>对于先前提到的<code>char (*p)[10];</code>，首先他是一个指针</em>p，其次他指向char [10]，所以他是一个数组指针</p>
<h3 id="指针数组和二维数组对比"><a href="#指针数组和二维数组对比" class="headerlink" title="指针数组和二维数组对比"></a>指针数组和二维数组对比</h3><ol>
<li>二维数组</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//定义</span><br><span class="hljs-type">char</span> days[<span class="hljs-number">7</span>][<span class="hljs-number">10</span>] = &#123;<br>“Sunday”, “Monday”, “Tuesday”, “Wednesday”,<br>“Thursday”, “Friday”, “Saturday”<br>&#125;;<br><br><span class="hljs-comment">//按行读取，strcmp(),string_compare，属于string.h</span><br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>, days[i]);<br>gets(days[i]);<br><span class="hljs-keyword">if</span>(<span class="hljs-built_in">strcmp</span>(days[i], <span class="hljs-string">&quot;Friday&quot;</span>)==<span class="hljs-number">0</span>)<br>    …<br><br><br></code></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th></th>
<th>[0]</th>
<th>[1]</th>
<th>[2]</th>
<th>[3]</th>
<th>[4]</th>
<th>[5]</th>
<th>[6]</th>
<th>[7]</th>
<th>[8]</th>
<th>[9]</th>
</tr>
</thead>
<tbody><tr>
<td>days[0]</td>
<td>S</td>
<td>u</td>
<td>n</td>
<td>d</td>
<td>a</td>
<td>y</td>
<td>\0</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>days[1]</td>
<td>M</td>
<td>o</td>
<td>n</td>
<td>d</td>
<td>a</td>
<td>y</td>
<td>\0</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>days[2]</td>
<td>T</td>
<td>u</td>
<td>e</td>
<td>s</td>
<td>d</td>
<td>a</td>
<td>y</td>
<td>\0</td>
<td></td>
<td></td>
</tr>
<tr>
<td>days[3]</td>
<td>W</td>
<td>e</td>
<td>d</td>
<td>n</td>
<td>e</td>
<td>s</td>
<td>d</td>
<td>a</td>
<td>y</td>
<td>\0</td>
</tr>
<tr>
<td>days[4]</td>
<td>T</td>
<td>h</td>
<td>u</td>
<td>r</td>
<td>s</td>
<td>d</td>
<td>a</td>
<td>y</td>
<td>\0</td>
<td></td>
</tr>
<tr>
<td>days[5]</td>
<td>F</td>
<td>r</td>
<td>i</td>
<td>d</td>
<td>a</td>
<td>y</td>
<td>\0</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>days[6]</td>
<td>S</td>
<td>a</td>
<td>t</td>
<td>u</td>
<td>r</td>
<td>d</td>
<td>a</td>
<td>y</td>
<td>\0</td>
<td></td>
</tr>
</tbody></table>
<ol start="2">
<li>指针数组</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//定义</span><br><span class="hljs-type">char</span> *days[<span class="hljs-number">7</span>] = &#123;<br>“Sunday”, “Monday”, “Tuesday”, “Wednesday”,<br>“Thursday”, “Friday”, “Saturday”<br>&#125;;<br><br><span class="hljs-comment">//使用方式</span><br><span class="hljs-type">char</span> buf[<span class="hljs-number">32</span>],*days[<span class="hljs-number">7</span>];<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>, buf);<br>days[i] = (<span class="hljs-type">char</span> *)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">strlen</span>(buf)+<span class="hljs-number">1</span>);<br><span class="hljs-built_in">strcpy</span>(days[i], buf);<br><br><span class="hljs-keyword">if</span>(<span class="hljs-built_in">strcmp</span>(days[i], buf)==<span class="hljs-number">0</span>)<br>    …<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>类似的地方</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//如何访问Friday的y</span><br>*(days[<span class="hljs-number">5</span>]+<span class="hljs-number">5</span>) = days[<span class="hljs-number">5</span>][<span class="hljs-number">5</span>] = ‘y’<br></code></pre></td></tr></table></figure>

<h3 id="指针数组用例"><a href="#指针数组用例" class="headerlink" title="指针数组用例"></a>指针数组用例</h3><p>使用指针数组来存放不同长度的字符串可以节省存贮空间，如，存放多个单词串、行。例如，如果要保存从标准输入或文件中读入的行，字符指针数组是一个好的选择。因为读入的行可能长短差异很大。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//arrayptr_storage.c</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAXLINE 1024</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAXLENGTH 512</span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">strlen</span><span class="hljs-params">(<span class="hljs-type">char</span> s[])</span><br>&#123;<br>    <span class="hljs-type">int</span> i =<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>(s[i]!=<span class="hljs-string">&#x27;\0&#x27;</span>)<br>    i++;<br>    <span class="hljs-keyword">return</span> i;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">strcopy</span><span class="hljs-params">(<span class="hljs-type">char</span> *s,<span class="hljs-type">char</span> *t)</span><br>&#123;<br>    <span class="hljs-keyword">while</span>((*s++ = *t++));<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span> <span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">char</span> buf[MAXLENGTH],*save[MAXLINE];<br>    <span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (gets(buf)!=<span class="hljs-literal">NULL</span>)<br>    &#123;<br>        save[i] =(<span class="hljs-type">char</span>*) <span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">strlen</span>(buf)+<span class="hljs-number">1</span>);<br>        strcopy(save[i],buf);<br>        i++;<br><br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s&quot;</span>,save[<span class="hljs-number">0</span>]);<br>    system(<span class="hljs-string">&quot;pause&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="二维数组补充"><a href="#二维数组补充" class="headerlink" title="二维数组补充"></a>二维数组补充</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">( )</span><br>&#123;<br>    <span class="hljs-type">char</span> a[<span class="hljs-number">4</span>][<span class="hljs-number">5</span>] = &#123; “abcd”, “efgh”, “ijkl”, “mnop” &#125;;<br>    <span class="hljs-built_in">printf</span>(“a=%x,  a[<span class="hljs-number">0</span>]=%x,  &amp;a[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]=%x\n”, a, a[<span class="hljs-number">0</span>], &amp;a[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]);<br>    <span class="hljs-built_in">printf</span>(“a+<span class="hljs-number">1</span>=%x,  a[<span class="hljs-number">0</span>]+<span class="hljs-number">1</span>=%x,  &amp;a[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>]=%x\n”, a+<span class="hljs-number">1</span>, a[<span class="hljs-number">0</span>]+<span class="hljs-number">1</span>, &amp;a[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>]);<br>    <span class="hljs-built_in">printf</span>(“**(a+<span class="hljs-number">1</span>)=%c,  *(a[<span class="hljs-number">0</span>]+<span class="hljs-number">1</span>)=%c\n”, **(a+<span class="hljs-number">1</span>), *(a[<span class="hljs-number">0</span>]+<span class="hljs-number">1</span>));<br>&#125; <br></code></pre></td></tr></table></figure>
<p><strong>表格示意图</strong></p>
<table>
<thead>
<tr>
<th></th>
<th>a[0]</th>
<th>a[0]+1</th>
<th>a[0]+2</th>
<th>a[0]+3</th>
<th>a[0]+4</th>
</tr>
</thead>
<tbody><tr>
<td>a[0]</td>
<td>a</td>
<td>b</td>
<td>c</td>
<td>d</td>
<td>\0</td>
</tr>
<tr>
<td>a[1]</td>
<td>e</td>
<td>f</td>
<td>g</td>
<td>h</td>
<td>\0</td>
</tr>
<tr>
<td>a[2]</td>
<td>i</td>
<td>j</td>
<td>k</td>
<td>l</td>
<td>\0</td>
</tr>
<tr>
<td>a[3]</td>
<td>m</td>
<td>n</td>
<td>o</td>
<td>p</td>
<td>\0</td>
</tr>
</tbody></table>
<p><strong>运行结果</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">a= 0x194,  a[0]= 0x194,  &amp;a[0][0]= 0x194<br>a+1= 0x199,  a[0]+1= 0x195,  &amp;a[0][1]= 0x195<br>**(a+1)= ‘e’,  *(a[0]+1) =‘b’<br></code></pre></td></tr></table></figure>

<p><strong>一点解释</strong><br>简单来说，二维数组，先指定行，后指定列，行确定下来后，加减整数都是对列的操作</p>
<ul>
<li>a是原始二维数组，都没指定，默认是第0行的地址，默认指向0,0</li>
<li>a[0]指定了0行，未指定列时，默认指向0列，所以和a结果一样</li>
<li>&amp;a[0][0]是对a[0][0]取地址，就是0,0本身</li>
<li>a+1是第1行的地址，因为没有指定行，加减就是行加减</li>
<li>a[0]+1是0,1,已经指定行，加减就是列加减</li>
<li>&amp;a[0][1]不解释</li>
<li>**(a+1)是两次解引用，a+1相当于a[1]，指向第1行，也就是第1行的地址，*(a+1)就是a[1]解引用得到第1行，它指向该行首元素，所以再次解引用**(a+1)就是1行0列的值</li>
</ul>
<hr>
<p><strong>二维数组的本质是数组的数组</strong><br>a[i]就是i行存放数字的数组，它也发生退化，名称本身是a[i]，但仍是指针，指向首元素</p>
<h3 id="指针数组的应用"><a href="#指针数组的应用" class="headerlink" title="指针数组的应用"></a>指针数组的应用</h3><h4 id="批量存储数据并通过函数返回"><a href="#批量存储数据并通过函数返回" class="headerlink" title="批量存储数据并通过函数返回"></a>批量存储数据并通过函数返回</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> *<span class="hljs-title function_">month_name</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span><br>&#123;<br>    <span class="hljs-type">static</span> <span class="hljs-type">char</span> *name[] = <br>    &#123;<br>        “illegal month”,<br>        “January”,<br>        “February”,<br>        “March”,<br>        “April”,<br>        “May”,<br>        “June”,<br>        “July”,<br>        “August”,<br>        “September”,<br>        “October”,<br>        “November”,<br>        “December”<br>        <span class="hljs-comment">//引号有误，仅做参考</span><br>    &#125;<br>    <span class="hljs-keyword">return</span>((n&lt;<span class="hljs-number">1</span>||n&gt;<span class="hljs-number">12</span>)?name[<span class="hljs-number">0</span>]:name[n])<br>&#125;<br></code></pre></td></tr></table></figure>

<p>可用于存储标准数据，作为数据库与其他数据进行比较</p>
<h4 id="传入命令行参数"><a href="#传入命令行参数" class="headerlink" title="传入命令行参数"></a>传入命令行参数</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc,<span class="hljs-type">char</span> *argv[])</span><br></code></pre></td></tr></table></figure>
<p>传入的命令行参数存储在<code>char *argv[]</code>里<br>例如运行<code>copy file1 file2</code><br>copy是程序名，file1和file2就是参数<br>argc此时为3，argv[i]就为参数，其中第一个参数一定是程序本身</p>
<table>
<thead>
<tr>
<th>索引</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>argv[0]</td>
<td>命令本身</td>
</tr>
<tr>
<td>argv[1]</td>
<td>第一个参数</td>
</tr>
<tr>
<td>argv[2]</td>
<td>第二个参数</td>
</tr>
<tr>
<td>…</td>
<td>…</td>
</tr>
<tr>
<td>argv[argc-1]</td>
<td>第 argc-1 个参数</td>
</tr>
</tbody></table>
<h2 id="问题7-实现echo"><a href="#问题7-实现echo" class="headerlink" title="问题7 实现echo"></a>问题7 实现echo</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//test_echo.c</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span><br>&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;argc;i++)<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s%c&quot;</span>,argv[i], (i&lt;argc<span class="hljs-number">-1</span>)?<span class="hljs-string">&#x27; &#x27;</span>:<span class="hljs-string">&#x27;\n&#x27;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>如果改为<code>int i =0;</code>则会先输出test_echo.exe的路径</p>
<h2 id="函数指针"><a href="#函数指针" class="headerlink" title="函数指针"></a>函数指针</h2><ul>
<li>函数指针：<code>int (*fp)()</code></li>
<li>返回值为指针的函数: <code>int *fp()</code></li>
</ul>
<p><strong>注意区分两者</strong><br>函数的名称本来就是指针<br>函数名被作为该函数的指针处理</p>
<p>eg.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">fn</span><span class="hljs-params">()</span>;<br><span class="hljs-type">int</span> main<br>&#123;<br>    <span class="hljs-type">int</span> (*fnptr)(),result;<br>    fnptr = fn;<br>    result = (*fnptr)(<span class="hljs-number">20</span>);<br>    <span class="hljs-comment">//等价于</span><br>    <span class="hljs-comment">//result = fn(20);</span><br>    <span class="hljs-comment">//也等价于</span><br>    <span class="hljs-comment">//result = fnptr(20);</span><br>    <span class="hljs-comment">//唯独不能是</span><br>    <span class="hljs-comment">//result = *fnptr(20);</span><br>    <span class="hljs-comment">//这是对返回值解引用</span><br><br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="函数指针的参数列表"><a href="#函数指针的参数列表" class="headerlink" title="函数指针的参数列表"></a>函数指针的参数列表</h3><p>上面的例子里，声明函数指针时<code>int (*fnptr)()</code>，括号内没有指定参数类型，表示参数不定，实际上是老式C语法，建议写入传参类型，如函数定义时写的一样，但不用写形参名称</p>
<h3 id="函数指针的用处"><a href="#函数指针的用处" class="headerlink" title="函数指针的用处"></a>函数指针的用处</h3><ol>
<li><strong>函数派遣表-dispatch</strong><br>使用index来访问某个函数，用于菜单系统</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> fn0,fn1,fn2,fn3,fn4;<br><span class="hljs-comment">//多个函数</span><br><br><span class="hljs-type">int</span> (*dispatch[])(<span class="hljs-type">int</span>) = &#123;fn0,fn1,fn2,fn3,fn4&#125;;<br><span class="hljs-comment">//函数指针数组</span><br><br>(*dispatch[index])();<br><span class="hljs-comment">//用index调用函数</span><br></code></pre></td></tr></table></figure>

<p><strong>函数指针数组</strong><br><code>int (*dispatch [])(int);</code><br>首先是个指针<code>*dispatch</code>，然后是一个指针数组<code>*dispatch []</code>，最后是一个指向函数的指针数组<code>int (*dispatch [])(int)</code></p>
<ol start="2">
<li>可以将函数作为参数进行传递</li>
</ol>
<h3 id="错误案例"><a href="#错误案例" class="headerlink" title="错误案例"></a>错误案例</h3><h4 id="eg1"><a href="#eg1" class="headerlink" title="eg1."></a>eg1.</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">char</span> *<span class="hljs-built_in">string</span>,c;         <span class="hljs-comment">//野指针</span><br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s\n&quot;</span>,<span class="hljs-built_in">string</span>);	<span class="hljs-comment">//scanf不需要\n，这个样子反而会需要你输入额外的换行符，干扰下一个scanf</span><br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%c&quot;</span>,&amp;c);         <br>    insert(*<span class="hljs-built_in">string</span>,c);      <span class="hljs-comment">//传入的都是字符，insert()大概率是void函数，传入地址才能实现外部修改</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<hr>
<h4 id="eg2"><a href="#eg2" class="headerlink" title="eg2."></a>eg2.</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-type">char</span> *<span class="hljs-title function_">insert</span><span class="hljs-params">(<span class="hljs-type">char</span> *<span class="hljs-built_in">string</span>,<span class="hljs-type">char</span> c)</span><br>&#123;<br>    <span class="hljs-comment">//这个插入函数是按照字母排序将c插入*string的</span><br>    <span class="hljs-type">int</span> i;<br>    <span class="hljs-type">char</span> s[<span class="hljs-number">50</span>];     <span class="hljs-comment">//局部变量，函数调用完栈帧销毁</span><br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;*<span class="hljs-built_in">string</span>&lt;c;i++)  <br>        s[i]=*<span class="hljs-built_in">string</span>++;     <span class="hljs-comment">//*string有类似于二维数组的索引</span><br>    s[i++]=c;<br>    <span class="hljs-keyword">for</span>(;*<span class="hljs-built_in">string</span>!=<span class="hljs-string">&#x27;\0&#x27;</span>;i++) <span class="hljs-comment">//循环不会复制\0，将&#x27;\0&#x27;也插入</span><br>        s[i]=*<span class="hljs-built_in">string</span>++;<br>    <span class="hljs-keyword">return</span> s;   <span class="hljs-comment">//无效</span><br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>     <span class="hljs-comment">//不建议写void main()</span><br>&#123;<br>    <span class="hljs-type">char</span> s1[<span class="hljs-number">50</span>],c;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s\n&quot;</span>,s1);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%c&quot;</span>,&amp;c);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s&quot;</span>,insert(s1,c));<br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>修正的insert()</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//写法非常紧凑，可以学习</span><br><span class="hljs-type">char</span> *<span class="hljs-title function_">insert</span><span class="hljs-params">(<span class="hljs-type">char</span> *<span class="hljs-built_in">string</span>,<span class="hljs-type">char</span> c)</span><br>&#123;<br>    <span class="hljs-type">int</span> i;<br>    <span class="hljs-type">char</span> s[<span class="hljs-number">50</span>], *s1=<span class="hljs-built_in">string</span>;<br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;*s1&lt;c;i++)<br>        s[i]=*s1++;<br>    s[i++]=c;<br>    <span class="hljs-keyword">for</span>(;(s[i]=*s1++)!=<span class="hljs-string">&#x27;\0&#x27;</span>;i++)<br>        ;<br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;(<span class="hljs-built_in">string</span>[i]=s[i])!=‘\<span class="hljs-number">0</span>’;i++)     <span class="hljs-comment">//赋值同时判断</span><br>        ; <br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">string</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<hr>
<h4 id="eg3"><a href="#eg3" class="headerlink" title="eg3."></a>eg3.</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//看着像是以前的大作业</span><br><span class="hljs-comment">//只有存储功能</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span>  <span class="hljs-comment">//作业单词排序</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;string.h&gt;</span></span><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span> <span class="hljs-params">(<span class="hljs-type">int</span> argc,<span class="hljs-type">char</span> *argv[])</span><br>&#123;<br>     <span class="hljs-type">int</span> n,i=<span class="hljs-number">0</span>,j=<span class="hljs-number">0</span>,k,t,m;<br>     <span class="hljs-type">char</span> c;<br>     <span class="hljs-type">char</span> s[<span class="hljs-number">1024</span>][<span class="hljs-number">100</span>];<br>     FILE *in ,*out ;<br>     in = fopen (argv[<span class="hljs-number">1</span>],<span class="hljs-string">&quot;r&quot;</span>);<br>     out = fopen (argv[<span class="hljs-number">2</span>],<span class="hljs-string">&quot;w&quot;</span>);<br>     <span class="hljs-keyword">while</span> ((c=fgetc(in) )!= EOF)<br>     &#123;<br>           <span class="hljs-keyword">if</span> (c == ‘ ’)    <span class="hljs-comment">//单词间只能有一个空格,多个出错</span><br>           &#123;<br>               i++;         <span class="hljs-comment">//读下一个单词，单词无’\0’</span><br>               j=<span class="hljs-number">0</span>;<br>           &#125;<br>           <span class="hljs-keyword">else</span><br>               s[i][j++] = c;<br>     &#125;<br>     ...<br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>补充了排序功能的完整代码（没有自己手敲，待学习，仅做记录）</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span><br>&#123;<br>    <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>, j = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">char</span> c;<br>    <span class="hljs-type">char</span> s[<span class="hljs-number">1024</span>][<span class="hljs-number">100</span>]; <span class="hljs-comment">// 最多1024个单词，每个最多99字符</span><br>    FILE *in, *out;<br><br>    in = fopen(argv[<span class="hljs-number">1</span>], <span class="hljs-string">&quot;r&quot;</span>);<br>    out = fopen(argv[<span class="hljs-number">2</span>], <span class="hljs-string">&quot;w&quot;</span>);<br><br>    <span class="hljs-keyword">if</span> (!in || !out) &#123;      <span class="hljs-comment">//由于NULL是0，所以!NULL是1,</span><br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;文件打开失败！\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// 读取所有单词</span><br>    <span class="hljs-keyword">while</span> ((c = fgetc(in)) != EOF) &#123;<br>        <span class="hljs-keyword">if</span> (c == <span class="hljs-string">&#x27; &#x27;</span> || c == <span class="hljs-string">&#x27;\n&#x27;</span>) &#123;<br>            s[i][j] = <span class="hljs-string">&#x27;\0&#x27;</span>; <span class="hljs-comment">// 每个单词以&#x27;\0&#x27;结尾</span><br>            i++;<br>            j = <span class="hljs-number">0</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            s[i][j++] = c;<br>        &#125;<br>    &#125;<br>    s[i][j] = <span class="hljs-string">&#x27;\0&#x27;</span>; <span class="hljs-comment">// 最后一个单词结束</span><br><br>    <span class="hljs-type">int</span> n = i + <span class="hljs-number">1</span>; <span class="hljs-comment">// 单词总数</span><br><br>    <span class="hljs-comment">// 简单冒泡排序</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> a = <span class="hljs-number">0</span>; a &lt; n - <span class="hljs-number">1</span>; a++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> b = a + <span class="hljs-number">1</span>; b &lt; n; b++) &#123;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">strcmp</span>(s[a], s[b]) &gt; <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-type">char</span> temp[<span class="hljs-number">100</span>];<br>                <span class="hljs-built_in">strcpy</span>(temp, s[a]);<br>                <span class="hljs-built_in">strcpy</span>(s[a], s[b]);<br>                <span class="hljs-built_in">strcpy</span>(s[b], temp);<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// 写入输出文件</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt; n; k++) &#123;<br>        <span class="hljs-built_in">fprintf</span>(out, <span class="hljs-string">&quot;%s\n&quot;</span>, s[k]);<br>    &#125;<br><br>    fclose(in);<br>    fclose(out);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h1 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h1><p>结构体就是一种自定义数据类型<br>eg.学生结构体</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//声明</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Student</span> &#123;</span><br>    <span class="hljs-type">int</span> id;             <span class="hljs-comment">// 学号</span><br>    <span class="hljs-type">char</span> name[<span class="hljs-number">50</span>];      <span class="hljs-comment">// 姓名</span><br>    <span class="hljs-type">float</span> score;        <span class="hljs-comment">// 成绩</span><br>&#125;;<br><br><span class="hljs-comment">//使用，实例化</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Student</span> <span class="hljs-title">s1</span>;</span><br>s1.id = <span class="hljs-number">1001</span>;<br><span class="hljs-built_in">strcpy</span>(s1.name, <span class="hljs-string">&quot;Alice&quot;</span>);<br>s1.score = <span class="hljs-number">92.5</span>;<br><br><span class="hljs-comment">//更简洁的声明，typedef类型定义</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> &#123;</span><br>  …<br>&#125; DATE;<br><br><span class="hljs-comment">//定义变量</span><br>DATE d, *pd, ad[<span class="hljs-number">10</span>];<br></code></pre></td></tr></table></figure>
<hr>
<p><strong>date结构体，和下面有关</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span>  <span class="hljs-title">date</span> &#123;</span><br><span class="hljs-type">int</span> day;<br><span class="hljs-type">int</span> month;<br><span class="hljs-type">int</span> year;<br><span class="hljs-type">int</span> yearday;<br><span class="hljs-type">char</span> mon_name[<span class="hljs-number">4</span>];<br>&#125;;<br></code></pre></td></tr></table></figure>
<hr>
<p><strong>关于typedef</strong><br><code>typedef</code>不产生新的数据类型，只是将已有的数据类型重命名<br>例如</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">typedef</span>  <span class="hljs-type">int</span>  LENGTH;<br><span class="hljs-keyword">typedef</span>  <span class="hljs-type">char</span>  *STRING;<br><span class="hljs-comment">//声明变量</span><br>LENGTH  len, maxlen;<br>STRING  lineptr[LINES], alloc( );<br><span class="hljs-comment">//等价于</span><br><span class="hljs-type">int</span>  len, maxlen;<br><span class="hljs-type">char</span>  *lineptr[LINES], *alloc( );<br></code></pre></td></tr></table></figure>
<hr>
<p><strong>用处</strong></p>
<ol>
<li>一些安全关键的软件中需要在程序中明确运行环境的数据类型长度，如：</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">typedef</span> <span class="hljs-type">int</span> INT32;<br><span class="hljs-keyword">typedef</span> <span class="hljs-type">short</span> INT16<br>INT32 port0,port1;<br>…<br></code></pre></td></tr></table></figure>
<ol start="2">
<li>用来定义结构类型，如FILE就是一个用typedef定义的结构类型。</li>
<li>数据结构中用来定义一个链表结点类型：</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">node</span> &#123;</span><br>    <span class="hljs-type">int</span> n;<br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">node</span> *<span class="hljs-title">next</span>;</span><br>&#125; *Nodeptr;<br>Nodeptr <span class="hljs-built_in">list</span>, p;<br>实际等价于：<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">node</span> *<span class="hljs-title">list</span>,*<span class="hljs-title">p</span>;</span><br></code></pre></td></tr></table></figure>
<hr>
<p><strong><code>FILE</code>是怎么定义的</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> _<span class="hljs-title">iobuf</span> &#123;</span><br>   <span class="hljs-type">char</span> *_ptr;<br>   <span class="hljs-type">int</span> _cnt;<br>   <span class="hljs-type">char</span> *_base;<br>   <span class="hljs-type">int</span> _flag;<br>   <span class="hljs-type">int</span> _file;<br>   <span class="hljs-type">int</span> _charbuf;<br>   <span class="hljs-type">int</span> _bufsiz;<br>   <span class="hljs-type">char</span> *_tmpfname;<br> &#125;;<br> <span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> _<span class="hljs-title">iobuf</span> <span class="hljs-title">FILE</span>;</span><br></code></pre></td></tr></table></figure>
<hr>
<p><strong>结构嵌套</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">person</span>  &#123;</span><br>    <span class="hljs-type">int</span> ID; <br>    <span class="hljs-type">char</span> name[<span class="hljs-number">32</span>];<br>    <span class="hljs-type">char</span> address[<span class="hljs-number">64</span>];<br>    <span class="hljs-type">char</span> department[<span class="hljs-number">64</span>];<br>    <span class="hljs-type">double</span> salary;<br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">date</span> <span class="hljs-title">birthdate</span>;</span><br>&#125;;<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">person</span> <span class="hljs-title">table</span>[100];</span><br></code></pre></td></tr></table></figure>
<p><strong>注意，不能嵌套自己，但可以嵌套自己的指针</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">keyword</span></span><br><span class="hljs-class">&#123;</span><br>    <span class="hljs-type">char</span> *name;<br>    <span class="hljs-type">int</span> count;<br>    <span class="hljs-comment">//struct keyword next;  //错误</span><br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">keyword</span> *<span class="hljs-title">next</span>;</span>   <span class="hljs-comment">//指向下一个相同结构体的指针，构造链表</span><br>&#125;*base;     <span class="hljs-comment">//立即声明指向struct keyword的指针base</span><br><span class="hljs-comment">//相当于另外写：</span><br><span class="hljs-comment">//struct keyword *base;</span><br></code></pre></td></tr></table></figure>
<hr>
<p><strong>初始化和赋值（软拷贝）</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span>  <span class="hljs-title">date</span> &#123;</span><br><span class="hljs-type">int</span> day;<br><span class="hljs-type">int</span> month;<br><span class="hljs-type">int</span> year;<br><span class="hljs-type">int</span> yearday;<br><span class="hljs-type">char</span> mon_name[<span class="hljs-number">4</span>];<br>&#125;;<br><span class="hljs-comment">//初始化</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">date</span> <span class="hljs-title">d</span> =</span> &#123;<span class="hljs-number">8</span>,<span class="hljs-number">6</span>,<span class="hljs-number">2025</span>,<span class="hljs-number">159</span>,<span class="hljs-string">&quot;Jun&quot;</span>&#125;;<br><br><span class="hljs-comment">//软拷贝</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">date</span> <span class="hljs-title">d1</span>,<span class="hljs-title">d2</span> =</span> &#123;<span class="hljs-number">8</span>,<span class="hljs-number">6</span>,<span class="hljs-number">2025</span>,<span class="hljs-number">159</span>,<span class="hljs-string">&quot;Jun&quot;</span>&#125;;<br>d1 = d2; <br></code></pre></td></tr></table></figure>
<hr>
<p><strong>访问结构成员</strong><br>结构变量名.成员名(.嵌套结构成员)</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">person</span>  &#123;</span><br>    <span class="hljs-type">int</span> ID; <br>    <span class="hljs-type">char</span> name[<span class="hljs-number">32</span>];<br>    <span class="hljs-type">char</span> address[<span class="hljs-number">64</span>];<br>    <span class="hljs-type">char</span> department[<span class="hljs-number">64</span>];<br>    <span class="hljs-type">double</span> salary;<br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">date</span> <span class="hljs-title">birthdate</span>;</span><br>&#125;;<br><br><span class="hljs-comment">//常规访问</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">person</span> <span class="hljs-title">uyhgb</span>;</span><br>uyhgb.salary = <span class="hljs-number">0</span>;<br>uyhgb.birthdate.year = <span class="hljs-number">2005</span>;<br><br><span class="hljs-comment">//指针访问，-&gt;运算符</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">date</span> *<span class="hljs-title">pd</span>, <span class="hljs-title">d</span>;</span> <span class="hljs-comment">//pd是指向struct date的指针</span><br>pd = &amp;d	<span class="hljs-comment">//指向一个已有结构变量</span><br>pd = (<span class="hljs-keyword">struct</span> date *) <span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">struct</span> date));	<span class="hljs-comment">//或者分配动态内存</span><br><span class="hljs-comment">//注意：小心野指针，与其它指针变量一样, 定义了pd并不表示pd有了它所指对象</span><br><br>pd-&gt;year = <span class="hljs-number">2005</span>;<br><span class="hljs-comment">//相当于(*pd).year = 2005;</span><br><span class="hljs-comment">//可以嵌套</span><br><span class="hljs-built_in">strcpy</span>(pd-&gt;mon_name,<span class="hljs-string">&quot;Jul&quot;</span>);<br></code></pre></td></tr></table></figure>
<hr>
<p><strong>例子：复数加减运算</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//complex.c</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">complex</span>      //结构体声明在最开头，全局作用域</span><br><span class="hljs-class">&#123;</span><br>    <span class="hljs-type">float</span> real;<br>    <span class="hljs-type">float</span> imag;<br>&#125;;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-type">complex</span> <span class="hljs-title function_">addcomplex</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> <span class="hljs-type">complex</span> c1,<span class="hljs-keyword">struct</span> <span class="hljs-type">complex</span> c2)</span>;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">complex</span> <span class="hljs-title">c1</span>,<span class="hljs-title">c2</span>,<span class="hljs-title">c3</span>;</span><br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%f %f %f %f&quot;</span>,&amp;c1.real,&amp;c1.imag,&amp;c2.real,&amp;c2.imag);<br>    c3 = addcomplex(c1,c2);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;(%.2f, %.2f) + (%.2f, %.2f) = (%.2f, %.2f)\n&quot;</span>, c1.real, c1.imag, c2.real, c2.imag, c3.real, c3.imag);<br>    system(<span class="hljs-string">&quot;pause&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-type">complex</span> <span class="hljs-title function_">addcomplex</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> <span class="hljs-type">complex</span> c1,<span class="hljs-keyword">struct</span> <span class="hljs-type">complex</span> c2)</span><br>&#123;<br>    <span class="hljs-type">float</span> sum_real,sum_imag;<br>    sum_real = c1.real + c2.real;<br>    sum_imag = c1.imag + c2.imag;<br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">complex</span> <span class="hljs-title">sum</span> =</span> &#123;sum_real,sum_imag&#125;;<br>    <span class="hljs-keyword">return</span> sum;<br>&#125; <br></code></pre></td></tr></table></figure>
<hr>
<p><strong>结构数组</strong><br>和其他数据类型的数组一样<br><em>结构数组通常用来实现表单（如员工表、学生记录表、产品表等）这类数据结构。</em></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">person</span>  &#123;</span><br>        <span class="hljs-type">int</span> ID; <br><span class="hljs-type">char</span> name[<span class="hljs-number">32</span>];<br><span class="hljs-type">char</span> address[<span class="hljs-number">64</span>];<br><span class="hljs-type">char</span> department[<span class="hljs-number">64</span>];<br><span class="hljs-type">double</span> salary;<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">date</span> <span class="hljs-title">birthdate</span>;</span><br>&#125;;<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">person</span> <span class="hljs-title">emplist</span>[100];</span><br></code></pre></td></tr></table></figure>
<hr>
<h2 id="问题8-统计输入中C语言关键字出现次数"><a href="#问题8-统计输入中C语言关键字出现次数" class="headerlink" title="问题8 统计输入中C语言关键字出现次数"></a>问题8 统计输入中C语言关键字出现次数</h2><p>编写一个程序，统计输入中C语言每个关键字的出现次数。</p>
<h3 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h3><p>需要一个指针数组<code>char *list[N]</code>存储关键字，再由一个整数数组<code>int count[N]</code>存储关键字出现次数<br>此时两数据相互关联，考虑使用结构体</p>
<hr>
<h2 id="不说别的，这个问题应该是从开始到现在最复杂的项目，我会按照我复刻课件代码的步骤一步步如实记录"><a href="#不说别的，这个问题应该是从开始到现在最复杂的项目，我会按照我复刻课件代码的步骤一步步如实记录" class="headerlink" title="不说别的，这个问题应该是从开始到现在最复杂的项目，我会按照我复刻课件代码的步骤一步步如实记录"></a><strong>不说别的，这个问题应该是从开始到现在最复杂的项目，我会按照我复刻课件代码的步骤一步步如实记录</strong></h2><hr>
<h3 id="算法设计"><a href="#算法设计" class="headerlink" title="算法设计"></a>算法设计</h3><h4 id="1-定义结构体，初始化关键字字典"><a href="#1-定义结构体，初始化关键字字典" class="headerlink" title="1. 定义结构体，初始化关键字字典"></a>1. 定义结构体，初始化关键字字典</h4><p>先不管别的，把字典写好，再想别的</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Key</span></span><br><span class="hljs-class">&#123;</span><br>    <span class="hljs-type">char</span> *keyword;<br>    <span class="hljs-type">int</span> count;<br>&#125; Keytab[]&#123;<br>    &#123;<span class="hljs-string">&quot;auto&quot;</span>, <span class="hljs-number">0</span>&#125;,<br>    &#123;<span class="hljs-string">&quot;break&quot;</span>, <span class="hljs-number">0</span>&#125;,<br>    &#123;<span class="hljs-string">&quot;case&quot;</span>, <span class="hljs-number">0</span>&#125;,<br>    ...     <span class="hljs-comment">//部分展示</span><br>&#125;;<br></code></pre></td></tr></table></figure>
<h4 id="2-拆分实现细节，提前声明我需要的函数"><a href="#2-拆分实现细节，提前声明我需要的函数" class="headerlink" title="2. 拆分实现细节，提前声明我需要的函数"></a>2. 拆分实现细节，提前声明我需要的函数</h4><p><strong>主要算法（伪代码）</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">while</span> (仍有新单词读入)<br><span class="hljs-keyword">if</span>(在关键字表中查找并找到输入的单词)<br>        相应关键字次数加<span class="hljs-number">1</span>；<br>输出关键字及出现次数；<br></code></pre></td></tr></table></figure>
<hr>
<h5 id="读入单词getword"><a href="#读入单词getword" class="headerlink" title="读入单词getword()"></a>读入单词getword()</h5><p>需要考虑到，不能继续使用<code>scanf(&quot;%s&quot;,word)</code></p>
<ol>
<li>不能正确处理标点符号和非字母字符</li>
<li>需要逐字符扫描，最好要可以判断是否是字母开头，到空格以及非字母字符时停止读入</li>
<li>scanf()没有长度限制，容易读入超长输入导致栈溢出，最好限制读入长度<br/><br>需要自定义读入函数<code>char getword(char *word,int lim);</code></li>
</ol>
<ul>
<li><p><code>char *word</code>在函数外声明，传入地址进行编辑即可</p>
</li>
<li><p>返回值是while循环条件，当读入的仍然是正确的单词时循环继续</p>
</li>
<li><p>使用常规判断方法<code>while((t=getword(char *word,int lim))!=EOF)</code></p>
</li>
<li><p>具体读入方法，由于需要逐字符读入，考虑getchar()</p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//代码这一块</span><br><span class="hljs-comment">//注意仅能输入英文和半角标点，内含强制char2int，必须满足ASCII码</span><br><span class="hljs-comment">//另外本函数无法判断有可能出现在注释或输出流字符串内的if/auto等关键字</span><br><span class="hljs-comment">//注意我定义getchar返回char</span><br><span class="hljs-type">char</span> <span class="hljs-title function_">getword</span><span class="hljs-params">(<span class="hljs-type">char</span> *w,<span class="hljs-type">int</span> lim)</span>       <br>&#123;<br>    <span class="hljs-type">int</span> c,t;<br>    <span class="hljs-keyword">if</span>(type(c = *w++ = getchar())!=LETTER)      <br>    <span class="hljs-comment">//多重赋值并判断，执行顺序：</span><br>    <span class="hljs-comment">//temp=getchar();--&gt;*w=temp;--&gt;w++;--&gt;c=temp;--&gt;tmp_type=type(c);--&gt;(tmp_type!=LETTER)?;</span><br>    &#123;<br>        *w=<span class="hljs-string">&#x27;\0&#x27;</span>;<br>        <span class="hljs-keyword">return</span> c;       <span class="hljs-comment">/*</span><br><span class="hljs-comment">        返回自己，GPT版本的宏定义在此处就有可能出现误判，我反复拷打GPT，给出两版方案，全部都是错的</span><br><span class="hljs-comment">        如果LETTER是1，不管getchar返回char还是int，如果c是&#x27;1&#x27;，返回到main函数后，都会整型提升再进行运算，1会通过对返回值是否是LETTER的判断，造成误判</span><br><span class="hljs-comment">        如果LETTER是-1，下面while循环通过后返回LETTER，此时我必须要修改getchar返回int，但是在main函数内，-1会通过EOF判断，从而直接提前结束读取</span><br><span class="hljs-comment">        如果要修改为其他不会造成漏洞的数字，也不是找不到，找一个不会类型转换的两位数，或者直接找超过ASCII定义的128以上的数，都可以，但这就违背了最开始简洁、优雅的目的，所以课件中定义&#x27;a&#x27;和&#x27;0&#x27;是非常正确的做法</span><br><span class="hljs-comment">        但仍然需要增加一个对OTHER的宏定义，详见下一个函数</span><br><span class="hljs-comment">        */</span><br><br>    &#125;<br><br>    <span class="hljs-keyword">while</span>(--lim)<br>    &#123;<br>        t=type(c=*w++=getchar());<br>        <span class="hljs-keyword">if</span>(t!=LETTER&amp;&amp;t!=DIGIT)     <span class="hljs-comment">//注意要把数字也一起判断，小心自定义结构int32_t a = 20; 会被错误统计</span><br>        &#123;<br>            ungetc(c,<span class="hljs-built_in">stdin</span>);    <span class="hljs-comment">//与课件不同，注意需要stdin</span><br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br><br>    &#125;<br>    *(w<span class="hljs-number">-1</span>) = <span class="hljs-string">&#x27;\0&#x27;</span>;  <span class="hljs-comment">//跳出循环并抹掉未通过if判断的非字母非数字字符并赋值为&#x27;\0&#x27;</span><br><br>    <span class="hljs-comment">/*等价于，多重赋值分开写，先判断再写入，更直观  </span><br><span class="hljs-comment">    while (--lim &gt; 0) </span><br><span class="hljs-comment">    &#123;</span><br><span class="hljs-comment">        c = getchar();</span><br><span class="hljs-comment">        t = type(c);</span><br><span class="hljs-comment">        if (t != LETTER &amp;&amp; t != DIGIT) &#123;</span><br><span class="hljs-comment">            ungetc(c, stdin); </span><br><span class="hljs-comment">            break;</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">        *w++ = c;</span><br><span class="hljs-comment">    &#125;*/</span>      <br>    <span class="hljs-keyword">return</span> LETTER;      <br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>补充：文件中读取关键字</strong><br>课件里有我就贴在这了，看起来主要是把getchar()改成fgetc了</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span>  <span class="hljs-title function_">getword</span><span class="hljs-params">(<span class="hljs-type">char</span> s[], FILE *fp)</span><br>&#123;<br>    <span class="hljs-type">int</span> c,  i = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>(type(c=fgetc(fp))！= LETTER)  <br>        <span class="hljs-keyword">if</span>(c == EOF) <span class="hljs-keyword">return</span> c;  <br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">continue</span>;<br>    s[i++] = c;<br>    <span class="hljs-keyword">while</span>((c=fgetc(fp))!=EOF)&#123;<br>         <span class="hljs-keyword">if</span>(type(c)!=LETTER&amp;&amp;type(c)!=DIGTH)<br>              <span class="hljs-keyword">break</span>; <br>         s[i++] = c;<br>    &#125;<br>    s[i]=<span class="hljs-string">&#x27;\0&#x27;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<hr>
<h5 id="类型判断"><a href="#类型判断" class="headerlink" title="类型判断"></a>类型判断</h5><p>在<code>getword()</code>时需要判断单词的类型来返回while判断条件<br>考虑define两种<strong>逻辑标签</strong>来作为易读的判断条件</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//课件版本，健壮性很低，数据可能会影响到控制逻辑（实则不然，上面的代码注释里有详细例子）</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> LETTER <span class="hljs-string">&#x27;a&#x27;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> DIGIT <span class="hljs-string">&#x27;0&#x27;</span></span><br><span class="hljs-comment">//增加OTHER为控制字符SOH，还算比较安全</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> OTHER <span class="hljs-string">&#x27;\1&#x27;</span></span><br><br><span class="hljs-comment">//GPT推荐定义</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> LETTER 1</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> DIGIT 2</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> OTHER 0</span><br></code></pre></td></tr></table></figure>
<br/>

<p>关于为什么不能用GPT给出的数字定义，注意上面的getword函数，在注释里有提到，这里补充一下什么是<strong>整型提升</strong><br>对于char类型，在ASCII范围（0-127），以及扩展ASCII码（128-255）在进行运算时（算术运算，比较运算，位运算）时，都会先发生隐式整型提升，实际上我已经使用过多次了，比如<code>char m; int c = m-&#39;a&#39;;</code>获取字母排序，比如char数字转换int数字，<code>char n; int c = n-&#39;0&#39;;</code></p>
<p>类型判断函数<code>type()</code>，用ASCII码判断最简单，可以把输入强行转换为整型，在ASCII码范围内比较即可，输出结果里只需返回字符串LETTER&#x2F;DIGIT&#x2F;other即可<br>由于比较简单，直接就可以写在这里了</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//课件版本，单独写了判断逻辑（重复造轮子这块）并且健壮性低，主要是return a;可能引入未知用户输入</span><br><span class="hljs-type">char</span> <span class="hljs-title function_">type</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span><br>&#123;<br>    <span class="hljs-keyword">if</span>((a&gt;=<span class="hljs-string">&#x27;a&#x27;</span>&amp;&amp;a&lt;=<span class="hljs-string">&#x27;z&#x27;</span>)||(a&gt;=<span class="hljs-string">&#x27;A&#x27;</span>&amp;&amp;a&lt;=<span class="hljs-string">&#x27;Z&#x27;</span>))<br>    <span class="hljs-keyword">return</span> LETTER;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a&gt;=<span class="hljs-string">&#x27;0&#x27;</span>&amp;&amp;a&lt;=<span class="hljs-string">&#x27;9&#x27;</span>)<br>    <span class="hljs-keyword">return</span> DIGIT;<br>    <span class="hljs-keyword">else</span><br>    <span class="hljs-keyword">return</span> a;       <br>&#125;<br><br><span class="hljs-comment">//修改版本</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;ctype.h&gt;</span>  <span class="hljs-comment">//isalpha和isdigit都在ctype.h</span></span><br><br><span class="hljs-type">char</span> <span class="hljs-title function_">type</span><span class="hljs-params">(<span class="hljs-type">int</span> c)</span> &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isalpha</span>(c)) <span class="hljs-keyword">return</span> LETTER;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isdigit</span>(c)) <span class="hljs-keyword">return</span> DIGIT;<br>    <span class="hljs-keyword">return</span> OTHER;   <br>&#125;<br></code></pre></td></tr></table></figure>
<br/>

<p><strong>关于课件示例代码的问题</strong></p>
<ol>
<li>嵌套结构非常多，紧凑但易读性较差，比如<code>if(type(c=*w++=getchar())!=LETTER)</code>，连续赋值，嵌套函数，自增运算，条件判断<br>上面写过执行顺序，这里再提一下</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c">temp=getchar();<br>*w=temp;<br>w++;<br>c=temp;<br>tmp_type=type(c);<br>(tmp_type!=LETTER)?;<br></code></pre></td></tr></table></figure>
<ol start="2">
<li>宏定义LETTER和DIGIT是非常有效且易读的办法，但定义什么值是需要仔细考虑的，GPT建议改为纯数字，错误我已经在上面代码注释中指出，但新增OTHER定义我认为还是比较有必要的，目前定义为’\1’，为ASCII码1号控制符，SOH，目前来看应该没有问题</li>
<li>这个项目本质上就是C编译器的前端，需要完成<em>C 的“编译前阶段”——词法分析（lexical analysis）</em>，但这个只是简化版，在遇到如下的测试输入就会出现错误统计，注释及字符串常量中可能存在关键字会被错误统计</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// if this works, we are good</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;if you see this, success\n&quot;</span>);<br>    <span class="hljs-keyword">if</span> (x == <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<hr>
<h5 id="折半查找算法"><a href="#折半查找算法" class="headerlink" title="折半查找算法"></a>折半查找算法</h5><p>在有序数据集中查找指定数据项最常用及最快的算法就是折半查找算法。<br>基本思想不介绍了，比较简单，直接看代码实现<br><strong>在有序整型数组中查找给定元素</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">search</span> <span class="hljs-params">(<span class="hljs-type">int</span> item,<span class="hljs-type">int</span> <span class="hljs-built_in">array</span>[],<span class="hljs-type">int</span> len)</span><br>&#123;<br>    <span class="hljs-type">int</span> low=<span class="hljs-number">0</span>,high=len<span class="hljs-number">-1</span>,mid;<br>    <span class="hljs-keyword">while</span>(low&lt;=high)<br>    &#123;<br>        mid = (high + low)/<span class="hljs-number">2</span>;   <span class="hljs-comment">//在每次循环开始时得到新的mid</span><br>        <span class="hljs-keyword">if</span>(item&gt;<span class="hljs-built_in">array</span>[mid])<br>        low = mid + <span class="hljs-number">1</span>;  <span class="hljs-comment">//mid+1，因为mid本身肯定是已经比item小了，直接往后一位</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(item&lt;<span class="hljs-built_in">array</span>[mid])<br>        high = mid - <span class="hljs-number">1</span>;  <span class="hljs-comment">//同理mid-1</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> mid; <span class="hljs-comment">//找到满足array[mid]=item的mid后返回</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<span class="hljs-comment">//字典没有item返回-1</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>如果基于指针运算就会有几点不同</strong></p>
<ol>
<li>比较item和字典时需要用到strcmp</li>
</ol>
<ul>
<li>头文件<code>&lt;string.h&gt;</code></li>
<li>函数声明<br><code>int strcmp(const char *s1, const char *s2);</code></li>
<li>返回值及含义</li>
</ul>
<table>
<thead>
<tr>
<th>返回值</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td><code>== 0</code></td>
<td>两个字符串<strong>完全相等</strong>（包括内容和长度）</td>
</tr>
<tr>
<td><code>&lt; 0</code>（负数）</td>
<td><code>s1</code> 的<strong>第一个不相等字符小于</strong> <code>s2</code> 的对应字符</td>
</tr>
<tr>
<td><code>&gt; 0</code>（正数）</td>
<td><code>s1</code> 的<strong>第一个不相等字符大于</strong> <code>s2</code> 的对应字符</td>
</tr>
</tbody></table>
<ol start="2">
<li>索引mid,high,low使用指针地址，字典里是顺序存储结构，地址连续，使用自定义结构体无影响</li>
<li>由于使用指针索引，前面指针运算的部分提到过指针计算中间值需要另一种写法<br><code>mid = low + (high - low)/2;</code></li>
</ol>
<p><strong>代码实现</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">struct</span> Key *<span class="hljs-title function_">Key_search</span><span class="hljs-params">(<span class="hljs-type">char</span> *w, <span class="hljs-keyword">struct</span> Key tab[], <span class="hljs-type">int</span> len)</span><br>&#123;<br>    <span class="hljs-type">int</span> t;  <span class="hljs-comment">//把strcmp结果存一下，避免多次运算</span><br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Key</span> *<span class="hljs-title">low</span> =</span> &amp;tab[<span class="hljs-number">0</span>];<br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Key</span> *<span class="hljs-title">high</span> =</span> &amp;tab[len<span class="hljs-number">-1</span>];     <span class="hljs-comment">//在终版代码里len用NKEYS代替</span><br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Key</span> *<span class="hljs-title">mid</span> =</span> <span class="hljs-literal">NULL</span>;<br><br>    <span class="hljs-keyword">while</span>(low&lt;high)<br>    &#123;   <br>        mid = low + (high-low)/<span class="hljs-number">2</span>;<br>        <span class="hljs-keyword">if</span>(t = <span class="hljs-built_in">strcmp</span>(*w,mid-&gt;keyword)&lt;<span class="hljs-number">0</span>)<br>            high = mid - <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(t&gt;<span class="hljs-number">0</span>)<br>            low = mid + <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> mid;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>NKEYS怎么算的</strong><br><code>#define  NKEYS (sizeof(Keytab) /sizeof(struct Key))</code></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/DS/" class="print-no-link">#DS</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>[DS]P1数据结构基础</div>
      <div>http://uyhgb.github.io/2025/06/13/DS-P1数据结构基础/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>uyhgb</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2025年6月13日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/06/13/DS-P0%E7%BB%AA%E8%AE%BA/" title="[DS]P0绪论">
                        <span class="hidden-mobile">[DS]P0绪论</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div id="waline"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#waline', function() {
      Fluid.utils.createCssLink('https://registry.npmmirror.com/@waline/client/2.15.8/files/dist/waline.css')
      Fluid.utils.createScript('https://registry.npmmirror.com/@waline/client/2.15.8/files/dist/waline.js', function() {
        var options = Object.assign(
          {"serverURL":"https://blogcommentserver-j03x026vm-uyhgbs-projects.vercel.app/","path":"window.location.pathname","meta":["nick","mail","link"],"requiredMeta":["nick"],"lang":"zh-CN","emoji":["https://cdn.jsdelivr.net/gh/walinejs/emojis/weibo"],"dark":"html[data-user-color-scheme=\"dark\"]","wordLimit":0,"pageSize":10},
          {
            el: '#waline',
            path: window.location.pathname
          }
        )
        Waline.init(options);
        Fluid.utils.waitElementVisible('#waline .vcontent', () => {
          var imgSelector = '#waline .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="leancloud-site-pv-container" style="display: none">
        总访问量 
        <span id="leancloud-site-pv"></span>
         次
      </span>
    
    
      <span id="leancloud-site-uv-container" style="display: none">
        总访客数 
        <span id="leancloud-site-uv"></span>
         人
      </span>
    
    

  

</div>

  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script defer src="/js/leancloud.js" ></script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
